---
title: Plan de résolution des problèmes de performances pour Office 365
ms.author: kvice
author: kelleyvice-msft
manager: laurawi
ms.date: 5/10/2019
ms.audience: Admin
ms.topic: conceptual
ms.service: o365-administration
localization_priority: Normal
ms.custom: Adm_O365
search.appverid:
- MET150
- MOE150
- BCS160
ms.assetid: e241e5d9-b1d8-4f1d-a5c8-4106b7325f8c
ms.collection:
- M365-security-compliance
- Ent_O365
description: Avez-vous besoin de connaître les étapes à suivre pour identifier et résoudre les problèmes de retard, de blocage et de ralentissement des performances entre SharePoint Online, OneDrive entreprise, Exchange Online ou Skype entreprise Online, et votre ordinateur client? Avant d’appeler la prise en charge, cet article peut vous aider à résoudre les problèmes de performances d’Office 365 et même à résoudre certains problèmes les plus courants.
ms.openlocfilehash: 5d7201174d33afab3e85714202aa637a835b7776
ms.sourcegitcommit: f506c95807a681cd661a99b1a8768c5c657dc126
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/10/2019
ms.locfileid: "33881532"
---
# <a name="performance-troubleshooting-plan-for-office-365"></a><span data-ttu-id="6d7b9-104">Plan de résolution des problèmes de performances pour Office 365</span><span class="sxs-lookup"><span data-stu-id="6d7b9-104">Performance troubleshooting plan for Office 365</span></span>

<span data-ttu-id="6d7b9-105">Avez-vous besoin de connaître les étapes à suivre pour identifier et résoudre les problèmes de retard, de blocage et de ralentissement des performances entre SharePoint Online, OneDrive entreprise, Exchange Online ou Skype entreprise Online, et votre ordinateur client?</span><span class="sxs-lookup"><span data-stu-id="6d7b9-105">Do you need to know the steps to take to identify and fix lags, hangs, and slow performance between SharePoint Online, OneDrive for Business, Exchange Online, or Skype for Business Online, and your client computer?</span></span> <span data-ttu-id="6d7b9-106">Avant d’appeler la prise en charge, cet article peut vous aider à résoudre les problèmes de performances d’Office 365 et même à résoudre certains problèmes les plus courants.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-106">Before you call support, this article can help you troubleshoot Office 365 performance issues and even fix some of the most common issues.</span></span>
  
<span data-ttu-id="6d7b9-107">Cet article est en fait un exemple de plan d’action que vous pouvez utiliser pour capturer des données importantes sur votre problème de performances à mesure qu’il se produit.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-107">This article is actually a sample action plan that you can use to capture valuable data about your performance issue as it's happening.</span></span> <span data-ttu-id="6d7b9-108">Certains des principaux problèmes sont également inclus dans cet article.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-108">Some top issues are also included in this article.</span></span>

<span data-ttu-id="6d7b9-109">Si vous ne connaissez pas les performances du réseau et que vous souhaitez faire un plan à long terme pour surveiller les performances entre vos ordinateurs clients et Office 365, jetez un œil à [office 365 Performance Tuning and Troubleshooting-admin and IT Pro](performance-tuning-using-baselines-and-history.md).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-109">If you're new to network performance and want to make a long term plan to monitor performance between your client machines and Office 365, take a look at [Office 365 performance tuning and troubleshooting - Admin and IT Pro](performance-tuning-using-baselines-and-history.md).</span></span>
  
## <a name="sample-performance-troubleshooting-action-plan"></a><span data-ttu-id="6d7b9-110">Exemple de plan d’action de résolution des problèmes de performances</span><span class="sxs-lookup"><span data-stu-id="6d7b9-110">Sample performance troubleshooting action plan</span></span>

<span data-ttu-id="6d7b9-111">Ce plan d’action contient deux parties; une phase de préparation et une phase de journalisation.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-111">This action plan contains two parts; a preparation phase, and a logging phase.</span></span> <span data-ttu-id="6d7b9-112">Si vous avez un problème de performances dès à présent, et que vous devez effectuer une collecte de données, vous pouvez commencer à utiliser ce plan immédiatement.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-112">If you have a performance problem right now, and you need to do data collection, you can start using this plan right away.</span></span>
  
### <a name="prepare-the-client-computer"></a><span data-ttu-id="6d7b9-113">Préparer l’ordinateur client</span><span class="sxs-lookup"><span data-stu-id="6d7b9-113">Prepare the client computer</span></span>
  
- <span data-ttu-id="6d7b9-114">Recherchez un ordinateur client qui peut reproduire le problème de performances.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-114">Find a client computer that can reproduce the performance problem.</span></span> <span data-ttu-id="6d7b9-115">Cet ordinateur sera utilisé au cours de la résolution des problèmes.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-115">This computer will be used during the course of troubleshooting.</span></span>
- <span data-ttu-id="6d7b9-116">Notez les étapes qui provoquent le problème de performances afin que vous soyez prêt à tester.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-116">Write down the steps that cause the performance problem to happen so you're ready when it comes time to test.</span></span>
- <span data-ttu-id="6d7b9-117">Installez les outils permettant de collecter et d’enregistrer des informations:</span><span class="sxs-lookup"><span data-stu-id="6d7b9-117">Install tools for gathering and recording information:</span></span>
  - <span data-ttu-id="6d7b9-118">Installez [Netmon 3,4](https://www.microsoft.com/en-us/download/details.aspx?id=4865) (ou utilisez un outil de suivi réseau équivalent).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-118">Install [Netmon 3.4](https://www.microsoft.com/en-us/download/details.aspx?id=4865) (or use an equivalent network tracing tool).</span></span>
  - <span data-ttu-id="6d7b9-119">Installez l’édition de base gratuite de [HTTPWatch](https://www.httpwatch.com/download/) (ou utilisez un outil de suivi réseau équivalent).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-119">Install the free Basic Edition of [HTTPWatch](https://www.httpwatch.com/download/) (or use an equivalent network Tracing tool).</span></span>
  - <span data-ttu-id="6d7b9-120">Utilisez un enregistreur d’écran ou exécutez l’enregistreur d’actions (V.Q.P.R.D.. exe) fourni avec Windows Vista et les versions ultérieures, afin de conserver un enregistrement des étapes que vous effectuez pendant les tests.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-120">Use a screen recorder or run the Steps Recorder (PSR.exe) that comes with Windows Vista and later, in order to keep a record of the steps you take during testing.</span></span>

### <a name="log-the-performance-issue"></a><span data-ttu-id="6d7b9-121">Consigner le problème de performances</span><span class="sxs-lookup"><span data-stu-id="6d7b9-121">Log the performance issue</span></span>
  
- <span data-ttu-id="6d7b9-122">Fermez tous les navigateurs Internet superflus.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-122">Close all extraneous Internet browsers.</span></span>
- <span data-ttu-id="6d7b9-123">Démarrez l’enregistreur d’actions ou un autre enregistreur d’écran.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-123">Start the Steps Recorder, or another screen recorder.</span></span>
- <span data-ttu-id="6d7b9-124">Démarrez votre capture Netmon (ou l’outil de suivi réseau).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-124">Start your Netmon capture (or network tracing tool).</span></span>
- <span data-ttu-id="6d7b9-125">Effacez votre cache DNS sur l’ordinateur client à partir de la ligne de commande en tapant ipconfig/flushdns.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-125">Clear your DNS cache on the client computer from the command line by typing ipconfig /flushdns.</span></span>
- <span data-ttu-id="6d7b9-126">Démarrez une nouvelle session de navigateur et activez HTTPWatch.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-126">Start a new browser session and turn on HTTPWatch.</span></span>
- <span data-ttu-id="6d7b9-127">Facultatif: Si vous testez Exchange Online, exécutez l’analyseur de performances du client Exchange à partir de la console d’administration Office 365.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-127">Optional: If you are testing Exchange Online, run the Exchange Client Performance Analyzer tool from the Office 365 admin console.</span></span>
- <span data-ttu-id="6d7b9-128">Reproduisez les étapes exactes à l’origine du problème de performances.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-128">Reproduce the exact steps that cause the performance issue.</span></span>
- <span data-ttu-id="6d7b9-129">Arrêtez votre Netmon ou le suivi de l’autre outil.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-129">Stop your Netmon or other tool's trace.</span></span>
- <span data-ttu-id="6d7b9-130">Sur la ligne de commande, exécutez un itinéraire de suivi vers votre abonnement Office 365 en tapant la commande suivante, puis en appuyant sur entrée:</span><span class="sxs-lookup"><span data-stu-id="6d7b9-130">At the command line, run a trace route to your Office 365 subscription by typing the following command and then pressing ENTER:</span></span>

  ``` cmd
  tracert <subscriptionname>.onmicrosoft.com
  ```

- <span data-ttu-id="6d7b9-131">Arrêtez l’enregistreur d’actions et enregistrez la vidéo.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-131">Stop the Steps Recorder and save the video.</span></span> <span data-ttu-id="6d7b9-132">Veillez à inclure la date et l’heure de la capture et indiquez si les performances sont bonnes ou mauvaises.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-132">Be sure to include the date and time of the capture and whether it demonstrates good or bad performance.</span></span>
- <span data-ttu-id="6d7b9-133">Enregistrez les fichiers de suivi.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-133">Save the trace files.</span></span> <span data-ttu-id="6d7b9-134">N’oubliez pas d’inclure la date et l’heure de la capture et s’il s’agit d’une bonne ou d’une mauvaise performance.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-134">Again, be sure to include the date and time of the capture and whether it demonstrates good or bad performance.</span></span>

<span data-ttu-id="6d7b9-135">Si vous n’êtes pas familiarisé avec l’exécution des outils mentionnés dans cet article, ne vous inquiétez pas, car nous fournissons les étapes suivantes.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-135">If you're not familiar with running the tools mentioned in this article, don't worry because we provide those steps next.</span></span> <span data-ttu-id="6d7b9-136">Si vous avez l’habitude d’effectuer ce type de capture de réseau, vous pouvez passer à la [procédure de collecte de configurations de référence](performance-tuning-using-baselines-and-history.md#how-to-collect-baselines), qui décrit le filtrage et la lecture des journaux.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-136">If you're accustomed to doing this kind of network capturing, you can skip to [How to collect baselines](performance-tuning-using-baselines-and-history.md#how-to-collect-baselines), which describes filtering and reading the logs.</span></span>
  
### <a name="flush-the-dns-cache-first"></a><span data-ttu-id="6d7b9-137">Videz d’abord le cache DNS</span><span class="sxs-lookup"><span data-stu-id="6d7b9-137">Flush the DNS Cache first</span></span>

<span data-ttu-id="6d7b9-138">Pourquoi ?</span><span class="sxs-lookup"><span data-stu-id="6d7b9-138">Why?</span></span> <span data-ttu-id="6d7b9-139">En vidant le cache DNS, vous commencez vos tests avec une ardoise propre.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-139">By flushing out the DNS cache you're starting your tests with a clean slate.</span></span> <span data-ttu-id="6d7b9-140">En effaçant le cache, vous redéfinissez le contenu de la résolution DNS sur les entrées les plus à jour.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-140">By clearing the cache, you're resetting the DNS resolver contents to the most up-to-date entries.</span></span> <span data-ttu-id="6d7b9-141">N’oubliez pas qu’un vidage ne supprime pas les entrées de fichier hosts.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-141">Remember that a flush does not remove HOSTs file entries.</span></span> <span data-ttu-id="6d7b9-142">Si vous utilisez largement des entrées de fichier hôte, vous devez copier ces entrées dans un fichier dans un autre répertoire, puis vider le fichier hôte.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-142">If you use HOST file entries extensively, you should copy those entries out to a file in another directory and then empty the HOST file.</span></span>
  
#### <a name="flush-your-dns-resolver-cache"></a><span data-ttu-id="6d7b9-143">Videz le cache de résolution DNS</span><span class="sxs-lookup"><span data-stu-id="6d7b9-143">Flush your DNS resolver cache</span></span>
  
1. <span data-ttu-id="6d7b9-144">Ouvrez l’invite de commandes ( **Démarrez** \> **exécuter** \> **cmd** ou la **touche** \> Windows **cmd**).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-144">Open the command prompt, (either **Start** \> **Run** \> **cmd** or **Windows key** \> **cmd**).</span></span>
2. <span data-ttu-id="6d7b9-145">Tapez la commande suivante, puis appuyez sur Entrée :</span><span class="sxs-lookup"><span data-stu-id="6d7b9-145">Type the following command and press ENTER:</span></span>

    ``` cmd
    ipconfig /flushdns
    ```

## <a name="netmon"></a><span data-ttu-id="6d7b9-146">Moniteur</span><span class="sxs-lookup"><span data-stu-id="6d7b9-146">Netmon</span></span>

<span data-ttu-id="6d7b9-147">L’outil de surveillance réseau de Microsoft ([Netmon](https://www.microsoft.com/download/details.aspx?id=4865)) analyse les paquets, c’est-à-dire le trafic, qui transitent entre les ordinateurs sur les réseaux.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-147">Microsoft's Network Monitoring tool ([Netmon](https://www.microsoft.com/download/details.aspx?id=4865)) analyzes packets, that is traffic, that passes between computers on networks.</span></span> <span data-ttu-id="6d7b9-148">L’utilisation de Netmon pour suivre le trafic avec Office 365 vous permet de capturer, d’afficher et de lire des en-têtes de paquets, d’identifier les périphériques impliqués, de vérifier les paramètres importants sur le matériel réseau, de rechercher les paquets ignorés et de suivre le flux de trafic entre les ordinateurs de votre entreprise. réseau et Office 365.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-148">By using Netmon to trace traffic with Office 365 you can capture, view, and read packet headers, identify intervening devices, check important settings on network hardware, look for dropped packets, and follow the flow of traffic between computers on your corporate network and Office 365.</span></span> <span data-ttu-id="6d7b9-149">Étant donné que le corps réel du trafic est chiffré, c’est-à-dire, qu’il a (transite sur le port 443 via SSL/TLS, vous ne pouvez pas lire les fichiers envoyés.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-149">Because the actual body of the traffic is encrypted, that is, it(travels on port 443 via SSL/TLS, you can't read the files being sent.</span></span> <span data-ttu-id="6d7b9-150">Au lieu de cela, vous obtenez un suivi non filtré du chemin emprunté par le paquet pour vous aider à identifier le comportement du problème.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-150">Instead, you get an unfiltered trace of the path that the packet takes which can help you track down the problem behavior.</span></span>
  
<span data-ttu-id="6d7b9-151">Veillez à ne pas appliquer de filtre pour le moment.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-151">Be sure you don't apply a filter at this time.</span></span> <span data-ttu-id="6d7b9-152">Au lieu de cela, exécutez les étapes et montrez le problème avant d’arrêter le suivi et d’enregistrer.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-152">Instead, run through the steps and demonstrate the problem before stopping the trace and saving.</span></span>
  
<span data-ttu-id="6d7b9-153">Une fois que vous avez installé Netmon 3,4, ouvrez l’outil et procédez comme suit:</span><span class="sxs-lookup"><span data-stu-id="6d7b9-153">After you install Netmon 3.4, open the tool and take these steps:</span></span>
  
### <a name="take-a-netmon-trace-and-reproduce-the-issue"></a><span data-ttu-id="6d7b9-154">Effectuer un suivi Netmon et reproduire le problème</span><span class="sxs-lookup"><span data-stu-id="6d7b9-154">Take a Netmon trace and reproduce the issue</span></span>
  
1. <span data-ttu-id="6d7b9-155">Lancez Netmon 3,4.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-155">Launch Netmon 3.4.</span></span>
<span data-ttu-id="6d7b9-156">La page de **démarrage** comporte trois volets: **captures récentes**, **sélection des réseaux**et **mise en route avec le moniteur réseau Microsoft 3,4. Notification**.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-156">There are three panes on the **Start** page: **Recent Captures**, **Select Networks**, and the **Getting Started with Microsoft Network Monitor 3.4. Notice**.</span></span> <span data-ttu-id="6d7b9-157">Le panneau sélectionner les réseaux vous donnera également une liste des réseaux par défaut à partir desquels vous pouvez effectuer des captures.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-157">The Select Networks panel will also give you a list of the default networks from which you can capture.</span></span> <span data-ttu-id="6d7b9-158">Assurez-vous que les cartes réseau sont sélectionnées ici.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-158">Be sure that network cards are selected here.</span></span>

2. <span data-ttu-id="6d7b9-159">Cliquez sur **nouvelle capture** en haut de la page de **démarrage** .</span><span class="sxs-lookup"><span data-stu-id="6d7b9-159">Click **New Capture** at the top of the **Start** page.</span></span> <span data-ttu-id="6d7b9-160">Cette méthode ajoute un nouvel onglet en regard de l’onglet page de **démarrage** appelé **capture 1**.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-160">This adds a new tab beside the **Start** page tab called **Capture 1**.</span></span>
<span data-ttu-id="6d7b9-161">![Interface utilisateur de Netmon avec les nouveaux boutons de capture, de démarrage et d’arrêt mis en surbrillance.](media/d4527d84-62ec-4301-82d5-e0166ff71f20.PNG)</span><span class="sxs-lookup"><span data-stu-id="6d7b9-161">![Netmon's user interface with the New Capture, Start, and Stop buttons highlighted.](media/d4527d84-62ec-4301-82d5-e0166ff71f20.PNG)</span></span>

3. <span data-ttu-id="6d7b9-162">Pour effectuer une capture simple, cliquez sur **Démarrer** dans la barre d’outils.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-162">To take a simple capture, click **Start** on the toolbar.</span></span>

4. <span data-ttu-id="6d7b9-163">Reproduisez les étapes qui présentent un problème de performances.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-163">Reproduce the steps that present a performance issue.</span></span>

5. <span data-ttu-id="6d7b9-164">Cliquez sur **arrêter** \> le **fichier** \> **Enregistrer sous**.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-164">Click **Stop** \> **File** \> **Save As**.</span></span> <span data-ttu-id="6d7b9-165">N’oubliez pas d’indiquer la date et l’heure avec le fuseau horaire et de mentionner s’il présente des performances médiocres ou bonnes.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-165">Remember to give the date and time with the time zone and to mention if it demonstrates bad or good performance.</span></span>

## <a name="httpwatch"></a><span data-ttu-id="6d7b9-166">HTTPWatch</span><span class="sxs-lookup"><span data-stu-id="6d7b9-166">HTTPWatch</span></span>

<span data-ttu-id="6d7b9-167">[HTTPWatch](https://www.httpwatch.com/download/) est facturé et une édition gratuite.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-167">[HTTPWatch](https://www.httpwatch.com/download/) comes in charged, and a free edition.</span></span> <span data-ttu-id="6d7b9-168">La version gratuite de Basic Edition couvre tout ce dont vous avez besoin pour ce test.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-168">The free Basic Edition covers everything you need for this test.</span></span> <span data-ttu-id="6d7b9-169">HTTPWatch analyse le trafic réseau et le temps de chargement de la page directement à partir de votre fenêtre de navigateur.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-169">HTTPWatch monitors network traffic and page load time right from your browser window.</span></span> <span data-ttu-id="6d7b9-170">HTTPWatch est un plug-in d’Internet Explorer qui décrit graphiquement les performances.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-170">HTTPWatch is a plug-in to Internet Explorer that graphically describes performance.</span></span> <span data-ttu-id="6d7b9-171">L’analyse peut être enregistrée et visualisée dans HTTPWatch Studio.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-171">The analysis can be saved and viewed in HTTPWatch Studio.</span></span>
  
> [!NOTE]
> <span data-ttu-id="6d7b9-172">Si vous utilisez un autre navigateur, tel que Firefox, Google Chrome, ou si vous ne pouvez pas installer HTTPWatch dans Internet Explorer, ouvrez une nouvelle fenêtre de navigateur et appuyez sur la touche F12 de votre clavier.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-172">If you use another browser, such as Firefox, Google Chrome, or if you can't install HTTPWatch in Internet Explorer, open a new browser window and press F12 on your keyboard.</span></span> <span data-ttu-id="6d7b9-173">Le menu contextuel de l’outil de développement doit apparaître en bas de votre navigateur.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-173">You should see the Developer Tool pop-up at the bottom of your browser.</span></span> <span data-ttu-id="6d7b9-174">Si vous utilisez Opera, appuyez sur CTRL + MAJ + I pour l’inspecteur Web, puis cliquez sur l’onglet **réseau** et effectuez les tests présentés ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-174">If you use Opera, press CTRL+SHIFT+I for Web Inspector, then click the **Network** tab and complete the testing outlined below.</span></span> <span data-ttu-id="6d7b9-175">Les informations seront légèrement différentes, mais les temps de chargement resteront affichés en millisecondes.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-175">The information will be slightly different, but load times will still be displayed in milliseconds.</span></span> <span data-ttu-id="6d7b9-176">> HTTPWatch est également très utile pour les problèmes liés aux temps de chargement des pages SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-176">> HTTPWatch is also very useful for issues with SharePoint Online page load times.</span></span>
  
### <a name="run-httpwatch-and-reproduce-the-issue"></a><span data-ttu-id="6d7b9-177">Exécuter HTTPWatch et reproduire le problème</span><span class="sxs-lookup"><span data-stu-id="6d7b9-177">Run HTTPWatch and reproduce the issue</span></span>
  
<span data-ttu-id="6d7b9-178">HTTPWatch est un plug-in de navigateur, donc l’exposition de l’outil dans le navigateur est légèrement différente pour chaque version d’Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-178">HTTPWatch is a browser plug-in, so exposing the tool in the browser is slightly different for each version of Internet Explorer.</span></span> <span data-ttu-id="6d7b9-179">En règle générale, vous pouvez trouver HTTPWatch sous la barre de commandes dans le navigateur Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-179">Typically, you can find HTTPWatch under the Commands bar in the Internet Explorer browser.</span></span> <span data-ttu-id="6d7b9-180">Si vous ne voyez pas le plug-in HTTPWatch dans la fenêtre de votre navigateur, vérifiez la version de votre navigateur en cliquant sur **aide** \> **sur**ou dans les versions ultérieures d’Internet Explorer, cliquez sur le symbole de l’engrenage et **sur Internet Explorer**.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-180">If you don't see the HTTPWatch plug-in in your browser window, check the version of your browser by clicking **Help** \> **About**, or in later versions of Internet Explorer, click the gear symbol and **About Internet Explorer**.</span></span> <span data-ttu-id="6d7b9-181">Pour ouvrir la barre de **commandes** , cliquez avec le bouton droit sur la barre de menus dans Internet Explorer, puis cliquez sur **barre de commandes**.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-181">To launch the **Commands** bar, right-click the menu bar in Internet Explorer and click **Commands bar**.</span></span>

<span data-ttu-id="6d7b9-182">Dans le passé, HTTPWatch a été associé à la fois aux commandes et aux volets d’exploration, par conséquent, une fois que vous avez installé, si vous ne voyez pas \*\*\*\* immédiatement l’icône (même après le redémarrage), puis les barres d’outils de l’icône.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-182">In the past, HTTPWatch has been associated with both the Commands and the Explorer bars, so once you install, if you don't immediately see the icon (even after reboot) check **Tools**, and your toolbars for the icon.</span></span> <span data-ttu-id="6d7b9-183">N’oubliez pas que les barres d’outils peuvent être personnalisées et qu’il est possible d’y ajouter des options.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-183">Remember that toolbars can be customized and options can be added to them.</span></span>

![Barre d’outils de commandes d’Internet Explorer avec l’icône HTTPWatch affichée.](media/198590b0-d7b1-4bff-a6ad-e4ec3a1e83df.png)
  
1. <span data-ttu-id="6d7b9-185">Lancez HTTPWatch dans une fenêtre de navigateur Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-185">Launch HTTPWatch in an Internet Explorer browser window.</span></span> <span data-ttu-id="6d7b9-186">Il apparaîtra ancré au navigateur au bas de cette fenêtre.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-186">It will appear docked to the browser at the bottom of that window.</span></span> <span data-ttu-id="6d7b9-187">Cliquez sur **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-187">Click **Record**.</span></span>

2. <span data-ttu-id="6d7b9-188">Reproduisez les étapes exactes du problème de performances.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-188">Reproduce the exact steps involved in the performance issue.</span></span> <span data-ttu-id="6d7b9-189">Cliquez sur le bouton **arrêter** dans HTTPWatch.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-189">Click the **Stop** button in HTTPWatch.</span></span>

3. <span data-ttu-id="6d7b9-190">**Enregistrer** le HTTPWatch ou **Envoyer par courrier électronique**.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-190">**Save** the HTTPWatch or **Send by Email**.</span></span> <span data-ttu-id="6d7b9-191">N’oubliez pas de nommer le fichier afin qu’il comprenne des informations de date et d’heure, ainsi qu’une indication de la présence d’une démonstration de bonne ou mauvaise qualité.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-191">Remember to name the file so that it includes date and time information and an indication of whether your Watch contains a demonstration of good or bad performance.</span></span>

![HTTPWatch affichant l’onglet Réseau pour le chargement de la page d’accueil Office 365.](media/021a2c64-d581-49fd-adf4-4c364f589d75.PNG)

<span data-ttu-id="6d7b9-193">Cette capture d’écran provient de la version professionnelle de HTTPWatch.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-193">This screen shot is from the Professional version of HTTPWatch.</span></span> <span data-ttu-id="6d7b9-194">Vous pouvez ouvrir des traces prises dans la version de base sur un ordinateur avec une version professionnel et y accéder.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-194">You can open traces taken in the Basic Version on a computer with a Professional version and read it there.</span></span> <span data-ttu-id="6d7b9-195">Des informations supplémentaires peuvent être disponibles à partir du suivi via cette méthode.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-195">Extra information may be available from the trace through that method.</span></span>

## <a name="problem-steps-recorder"></a><span data-ttu-id="6d7b9-196">Enregistreur d’actions d’un problème</span><span class="sxs-lookup"><span data-stu-id="6d7b9-196">Problem Steps Recorder</span></span>

<span data-ttu-id="6d7b9-197">L’enregistreur d’actions utilisateur, ou V.Q.P.R.D.. exe, vous permet d’enregistrer les problèmes au fur et à mesure qu’ils se produisent.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-197">Steps Recorder, or PSR.exe, allows you to record issues as they are occurring.</span></span> <span data-ttu-id="6d7b9-198">Il s’agit d’un outil très utile et très simple à exécuter.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-198">It's a very useful tool and very simple to run.</span></span>
  
### <a name="run-problem-steps-recorder-psrexe-to-record-your-work"></a><span data-ttu-id="6d7b9-199">Exécuter l’enregistreur d’étapes du problème (V.Q.P.R.D.. exe) pour enregistrer votre travail</span><span class="sxs-lookup"><span data-stu-id="6d7b9-199">Run Problem Steps Recorder (PSR.exe) to record your work</span></span>
  
1. <span data-ttu-id="6d7b9-200">Utilisez **Démarrer** \> **exécuter** \> type **v.q.p.r.d.. exe** \> **OK**, ou cliquez sur le type de **clé** \> Windows **v.q.p.r.d.. exe** \> , puis appuyez sur entrée.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-200">Either use **Start** \> **Run** \> type **PSR.exe** \> **OK**, or, click the **Windows Key** \> type **PSR.exe** \> and then press ENTER.</span></span>

2. <span data-ttu-id="6d7b9-201">Lorsque la fenêtre Small V.Q.P.R.D.. exe s’affiche, cliquez sur **Démarrer l’enregistrement** et reproduisez les étapes qui reproduisent le problème de performances.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-201">When the small PSR.exe window appears, click **Start Record** and reproduce the steps that reproduce the performance issue.</span></span> <span data-ttu-id="6d7b9-202">Vous pouvez ajouter des commentaires en fonction de vos besoins en cliquant sur **Ajouter des commentaires**.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-202">You can add comments as needed, by clicking **Add Comments**.</span></span>

3. <span data-ttu-id="6d7b9-203">Cliquez sur **arrêter l’enregistrement** lorsque vous avez terminé les étapes.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-203">Click **Stop Record** when you have completed the steps.</span></span> <span data-ttu-id="6d7b9-204">Si le problème de performances est un rendu de page, attendez que la page s’affiche avant d’arrêter l’enregistrement.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-204">If the performance issue is a page render, wait for the page to render before you stop the recording.</span></span>

4. <span data-ttu-id="6d7b9-205">Cliquez sur **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-205">Click **Save**.</span></span>

![Capture d’écran de l’enregistreur d’actions ou du fichier V.Q.P.R.D.. exe.](media/8542b0aa-a3ff-4718-8dc4-43f5521c6c34.PNG)
  
<span data-ttu-id="6d7b9-207">La date et l’heure sont enregistrées.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-207">The date and time is recorded for you.</span></span> <span data-ttu-id="6d7b9-208">Cela lie vos V.Q.P.R.D. à votre suivi Netmon et HTTPWatch dans le temps, et vous aide à résoudre les problèmes de précision.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-208">This links your PSR to your Netmon trace and HTTPWatch in time, and helps with precision troubleshooting.</span></span> <span data-ttu-id="6d7b9-209">La date et l’heure de l’enregistrement du V.Q.P.R.D. peuvent indiquer qu’une minute s’est écoulée entre la connexion et la consultation de l’URL et le rendu partiel du site d’administration, par exemple.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-209">The date and time in the PSR record can show that a minute passed between the login and browsing of the URL and the partial render of the admin site, for example.</span></span>
  
## <a name="read-your-traces"></a><span data-ttu-id="6d7b9-210">Lire vos traces</span><span class="sxs-lookup"><span data-stu-id="6d7b9-210">Read your traces</span></span>

<span data-ttu-id="6d7b9-211">Il n’est pas possible d’apprendre tout sur le dépannage du réseau et des performances que quelqu’un a besoin de connaître via un article.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-211">It isn't possible to teach everything about network and performance troubleshooting that someone would need to know via an article.</span></span> <span data-ttu-id="6d7b9-212">Obtenir des performances optimales prend de l’expérience et connaît le fonctionnement de votre réseau et se comporte généralement.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-212">Getting good at performance takes experience, and knowledge of how your network works and usually performs.</span></span> <span data-ttu-id="6d7b9-213">Toutefois, il est possible d’arrondir une liste des principaux problèmes et de montrer comment les outils peuvent vous aider à éliminer les problèmes les plus courants.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-213">But it is possible to round up a list of top issues and show how tools can make it easier for you to eliminate the most common problems.</span></span>
  
<span data-ttu-id="6d7b9-214">Si vous souhaitez prendre des compétences en lisant des traces réseau pour vos sites Office 365, il n’y a pas de meilleur enseignant que la création régulière de traces de charge de page et l’expérience de lecture.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-214">If you want to pick up skills reading network traces for your Office 365 sites, there is no better teacher than creating traces of page loads regularly and gaining experience reading them.</span></span> <span data-ttu-id="6d7b9-215">Par exemple, lorsque vous avez une chance, chargez un service Office 365 et suivez le processus.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-215">For example, when you have a chance, load an Office 365 service and trace the process.</span></span> <span data-ttu-id="6d7b9-216">Filtrez le suivi pour le trafic DNS ou recherchez le nom du service que vous avez parcouru dans le FrameData.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-216">Filter the trace for DNS traffic, or search the FrameData for the name of the service you browsed.</span></span> <span data-ttu-id="6d7b9-217">Analysez le suivi pour obtenir une idée des étapes qui se produisent lors du chargement du service.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-217">Scan the trace to get an idea of the steps that occur when the service loads.</span></span> <span data-ttu-id="6d7b9-218">Cela vous permettra de découvrir ce à quoi ressemblent le chargement normal des pages, et dans le cas d’une résolution des problèmes, en particulier en ce qui concerne les performances, la comparaison de bons et de mauvais suivis peut vous enseigner beaucoup.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-218">This will help you learn what normal page load should look like, and in the case of troubleshooting, particularly around performance, comparing good to bad traces can teach you a lot.</span></span>
  
<span data-ttu-id="6d7b9-219">Netmon utilise Microsoft IntelliSense dans le champ filtre d’affichage.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-219">Netmon uses Microsoft Intellisense in the Display filter field.</span></span> <span data-ttu-id="6d7b9-220">IntelliSense, ou la saisie semi-automatique du code, est cette astuce où vous tapez un point et toutes les options disponibles sont affichées dans une zone de sélection déroulante.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-220">Intellisense, or intelligent code completion, is that trick where you type in a period and all available options are displayed in a drop-down selection box.</span></span> <span data-ttu-id="6d7b9-221">Si, par exemple, vous vous inquiétez de la mise à l’échelle de la fenêtre TCP, vous pouvez rechercher un filtre `.protocol.tcp.window < 100`(tel que) par cette méthode.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-221">If, for example, you are worried about TCP window scaling, you can find your way to a filter (such as  `.protocol.tcp.window < 100`) by this means.</span></span>
  
![Capture d’écran de Netmon montrant que le champ filtre d’affichage utilise IntelliSense.](media/75a56c11-9a60-47ee-a100-aabdfb1ba10f.PNG)
  
<span data-ttu-id="6d7b9-223">Les traces Netmon peuvent contenir un grand nombre de trafic.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-223">Netmon traces can have a lot of traffic in them.</span></span> <span data-ttu-id="6d7b9-224">Si vous n’êtes pas expérimenté en les lisant, il est probable que vous ouvriez le suivi la première fois.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-224">If you aren't experienced with reading them, it's likely you will be overwhelmed opening the trace the first time.</span></span> <span data-ttu-id="6d7b9-225">La première chose à faire est de séparer le signal du bruit de fond dans le suivi.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-225">The first thing to do is separate the signal from the background noise in the trace.</span></span> <span data-ttu-id="6d7b9-226">Vous avez testé sur Office 365, et c’est le trafic que vous souhaitez voir.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-226">You tested against Office 365, and that's the traffic you want to see.</span></span> <span data-ttu-id="6d7b9-227">Si vous êtes utilisé pour naviguer dans les traces, il se peut que vous n’ayez pas besoin de cette liste.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-227">If you are used to navigating through traces, you may not need this list.</span></span>
  
<span data-ttu-id="6d7b9-228">Le trafic entre votre client et Office 365 transite via TLS, ce qui signifie que le corps du trafic est chiffré et illisible dans un suivi Netmon générique.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-228">Traffic between your client and Office 365 travels via TLS, which means that the body of the traffic will be encrypted and not readable in a generic Netmon trace.</span></span> <span data-ttu-id="6d7b9-229">Votre analyse des performances n’a pas besoin de savoir quels sont les détails des informations contenues dans le paquet.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-229">Your performance analysis doesn't need to know the specifics of the information in the packet.</span></span> <span data-ttu-id="6d7b9-230">Toutefois, il est très intéressé par les en-têtes de paquets et les informations qu’ils contiennent.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-230">It is, however, very interested in packet headers and the information that they contain.</span></span>
  
### <a name="tips-to-get-a-good-trace"></a><span data-ttu-id="6d7b9-231">Conseils pour obtenir un suivi approprié</span><span class="sxs-lookup"><span data-stu-id="6d7b9-231">Tips to get a good trace</span></span>
  
- <span data-ttu-id="6d7b9-232">Sachez que la valeur de l’adresse IPv4 ou IPv6 de votre ordinateur client.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-232">Know the value of the IPv4 or IPv6 address of your client computer.</span></span> <span data-ttu-id="6d7b9-233">Vous pouvez obtenir ce message à partir de l’invite de commandes en tapant **ipconfig** , puis en appuyant sur entrée.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-233">You can get this from the command prompt by typing **IPConfig** and then pressing ENTER.</span></span> <span data-ttu-id="6d7b9-234">La connaissance de cette adresse vous permettra de savoir en un clin d’œil si le trafic dans le suivi implique directement votre ordinateur client.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-234">Knowing this address will let you tell at a glance whether the traffic in the trace directly involves your client computer.</span></span> <span data-ttu-id="6d7b9-235">S’il existe un proxy connu, exécutez la commande ping et obtenez également son adresse IP.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-235">If there is a known proxy, ping it and get its IP address as well.</span></span>

- <span data-ttu-id="6d7b9-236">Videz le cache de résolution DNS et, si possible, fermez tous les navigateurs à l’exception de celui dans lequel vous exécutez vos tests.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-236">Flush your DNS resolver cache and, if possible, close all browsers except the one in which you are running your tests.</span></span> <span data-ttu-id="6d7b9-237">Si vous ne parvenez pas à effectuer cette opération, par exemple, si la prise en charge utilise un outil basé sur un navigateur pour afficher le Bureau de votre ordinateur client, préparez-vous à filtrer votre suivi.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-237">If you are not able to do this, for instance, if support is using some browser-based tool to see your client computer's desktop, be prepared to filter your trace.</span></span>

- <span data-ttu-id="6d7b9-238">Dans un suivi occupé, localisez le service Office 365 que vous utilisez.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-238">In a busy trace, locate the Office 365 service that you're using.</span></span> <span data-ttu-id="6d7b9-239">Si vous n’avez jamais vu votre trafic auparavant, il s’agit d’une étape utile pour séparer le problème de performances d’un autre bruit réseau.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-239">If you've never or seldom seen your traffic before, this is a helpful step in separating the performance issue from other network noise.</span></span> <span data-ttu-id="6d7b9-240">Il existe plusieurs façons de le faire.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-240">There are a few ways to do this.</span></span> <span data-ttu-id="6d7b9-241">Directement avant votre test, vous pouvez utiliser _ping_ ou _PsPing_ par rapport à l’URL du service spécifique`ping outlook.office365.com` ( `psping -4 microsoft-my.sharepoint.com:443`ou, par exemple).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-241">Directly before your test, you can use _ping_ or _PsPing_ against the URL of the specific service (`ping outlook.office365.com` or `psping -4 microsoft-my.sharepoint.com:443`, for example).</span></span> <span data-ttu-id="6d7b9-242">Vous pouvez également trouver facilement ce ping ou PsPing dans un suivi Netmon (par son nom de processus).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-242">You can also easily find that ping or PsPing in a Netmon trace (by its process name).</span></span> <span data-ttu-id="6d7b9-243">Cela vous permettra de commencer à rechercher.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-243">That will give you a place to start looking.</span></span>

<span data-ttu-id="6d7b9-244">Si vous utilisez uniquement le suivi Netmon au moment du problème, c’est également possible.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-244">If you're only using Netmon tracing at the time of the problem, that's okay too.</span></span> <span data-ttu-id="6d7b9-245">Pour vous orienter, utilisez un filtre comme `ContainsBin(FrameData, ASCII, "office")` ou `ContainsBin(FrameData, ASCII, "outlook")`.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-245">To orient yourself, use a filter like `ContainsBin(FrameData, ASCII, "office")` or `ContainsBin(FrameData, ASCII, "outlook")`.</span></span> <span data-ttu-id="6d7b9-246">Vous pouvez enregistrer votre numéro de trame à partir du fichier de suivi.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-246">You can record your frame number from the trace file.</span></span> <span data-ttu-id="6d7b9-247">Vous pouvez également faire défiler le volet de _synthèse des cadres_ vers la droite et rechercher la colonne ID de conversation.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-247">You may also want to scroll the _Frame Summary_ pane all the way to the right and look for the Conversation ID column.</span></span> <span data-ttu-id="6d7b9-248">Il existe un numéro indiqué pour l’ID de cette conversation spécifique que vous pouvez également enregistrer et regarder dans isolation ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-248">There is a number indicated there for the ID of this specific conversation that you can also record and look at in isolation later.</span></span> <span data-ttu-id="6d7b9-249">N’oubliez pas de supprimer ce filtre avant d’appliquer d’autres filtres.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-249">Remember to remove this filter before applying any other filtering.</span></span>

> [!TIP]
> <span data-ttu-id="6d7b9-250">Netmon comporte un grand nombre de filtres intégrés utiles.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-250">Netmon has a lot of helpful built-in filters.</span></span> <span data-ttu-id="6d7b9-251">Essayez le bouton **charger le filtre** en haut du volet filtre d' _affichage_ .</span><span class="sxs-lookup"><span data-stu-id="6d7b9-251">Try the **Load Filter** button at the top of the _Display_ filter pane.</span></span>
  
![Recherchez votre adresse IP à l’aide de PSPing sur la ligne de commande sur l’ordinateur client.](media/4c43ac67-e28e-4536-842d-7add7aa28847.PNG)
  
![Trace Netmon à partir du client affichant la même commande PSPing via le filtre TCP. Flags. syn = = 1.](media/0ae7ef7d-e003-4d01-a006-dc49bd1fcef2.PNG)
  
<span data-ttu-id="6d7b9-254">Familiarisez-vous avec votre trafic et découvrez comment trouver les informations dont vous avez besoin.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-254">Get familiar with your traffic, and learn to locate the information you need.</span></span> <span data-ttu-id="6d7b9-255">Par exemple, Apprenez à déterminer quel paquet de la trace a la première référence au service Office 365 que vous utilisez (par exemple, «Outlook»).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-255">For example, learn to determine which packet in the trace has the first reference to the Office 365 service you're using (like "Outlook").</span></span>

<span data-ttu-id="6d7b9-256">En prenant Office 365 Outlook Online comme exemple, le trafic commence comme ceci:</span><span class="sxs-lookup"><span data-stu-id="6d7b9-256">Taking Office 365 Outlook Online as an example, the traffic begins something like this:</span></span>
  
- <span data-ttu-id="6d7b9-257">Requête DNS standard et réponse DNS pour outlook.office365.com avec QueryIDs correspondant.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-257">DNS Standard Query and DNS Response for outlook.office365.com with matching QueryIDs.</span></span> <span data-ttu-id="6d7b9-258">Il est important de noter le décalage de temps pour ce tour, ainsi que l’endroit où le DNS global d’Office 365 envoie la demande de résolution de noms.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-258">It's important to note the time offset for this turn-around, as well as where in the world the Office 365 Global DNS sends the request for name resolution.</span></span> <span data-ttu-id="6d7b9-259">Idéalement, autant que possible, au lieu de traverser le monde entier.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-259">Ideally, as locally as possible, rather than halfway across the world.</span></span>

- <span data-ttu-id="6d7b9-260">Une requête HTTP GET dont le rapport d’État A été déplacé définitivement (301)</span><span class="sxs-lookup"><span data-stu-id="6d7b9-260">A HTTP GET Request whose status report Moved Permanently (301)</span></span>

- <span data-ttu-id="6d7b9-261">Le trafic RWS, y compris les demandes de connexion à RWS, et connecte les réponses.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-261">RWS Traffic including RWS Connect requests and Connect replies.</span></span> <span data-ttu-id="6d7b9-262">(Winsock distant effectue une connexion pour vous.)</span><span class="sxs-lookup"><span data-stu-id="6d7b9-262">(This is Remote Winsock making a connection for you.)</span></span>

- <span data-ttu-id="6d7b9-263">Une conversation TCP SYN et TCP SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-263">A TCP SYN and TCP SYN/ACK conversation.</span></span> <span data-ttu-id="6d7b9-264">De nombreuses valeurs de cette conversation influent sur les performances.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-264">A lot of the settings in this conversation impact your performance.</span></span>

- <span data-ttu-id="6d7b9-265">Une série de TLS: le trafic TLS où se déroule la négociation TLS et les conversations de certificat TLS.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-265">Then a series of TLS:TLS traffic which is where the TLS handshake and TLS certificate conversations take place.</span></span> <span data-ttu-id="6d7b9-266">(Souvenez-vous que les données sont chiffrées via SSL/TLS.)</span><span class="sxs-lookup"><span data-stu-id="6d7b9-266">(Remember the data is encrypted via SSL/TLS.)</span></span>

<span data-ttu-id="6d7b9-267">Toutes les parties du trafic sont importantes et connectées, mais les petites parties du suivi contiennent des informations particulièrement importantes en matière de résolution des problèmes de performances, c’est pourquoi nous allons nous concentrer sur ces domaines.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-267">All parts of the traffic are important and connected, but small portions of the trace contain information particularly important in terms of performance troubleshooting, so we'll focus on those areas.</span></span> <span data-ttu-id="6d7b9-268">En outre, étant donné que nous avons terminé le dépannage des performances Office 365 chez Microsoft pour compiler une liste des dix problèmes courants, nous nous concentrerons sur ces problèmes et sur l’utilisation des outils que nous devons mettre en avant.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-268">Also, since we've done enough Office 365 performance troubleshooting at Microsoft to compile a Top Ten list of common problems, we'll focus on those issues and how to use the tools we have to root them out next.</span></span>
  
<span data-ttu-id="6d7b9-269">Si vous n’avez pas installé tous les éléments prêts, la matrice ci-dessous utilise plusieurs outils.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-269">If you haven't installed them all ready, the matrix below makes use of several tools.</span></span> <span data-ttu-id="6d7b9-270">Dans la mesure du possible.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-270">Where possible.</span></span> <span data-ttu-id="6d7b9-271">Des liens sont fournis aux points d’installation.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-271">Links are provided to the installation points.</span></span> <span data-ttu-id="6d7b9-272">La liste inclut des outils de suivi réseau courants, tels que [Netmon](https://www.microsoft.com/en-us/download/details.aspx?id=4865) et [Wireshark](https://www.wireshark.org/), mais vous pouvez utiliser n’importe quel outil de suivi auquel vous êtes habitué et dans lequel vous êtes habitué à filtrer le trafic réseau.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-272">The list includes common network tracing tools like [Netmon](https://www.microsoft.com/en-us/download/details.aspx?id=4865) and [Wireshark](https://www.wireshark.org/), but use any tracing tool you are comfortable with, and in which you're accustomed to filtering network traffic.</span></span> <span data-ttu-id="6d7b9-273">Lorsque vous testez, rappelez-vous des éléments suivants:</span><span class="sxs-lookup"><span data-stu-id="6d7b9-273">When you're testing, remember:</span></span>
  
- <span data-ttu-id="6d7b9-274">*Fermez vos navigateurs et testez avec un seul navigateur en cours d’exécution* -cela réduira le trafic global que vous capturez.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-274">*Close your browsers, and test with only one browser running*  - This will reduce the overall traffic you capture.</span></span> <span data-ttu-id="6d7b9-275">Il effectue une trace moins chargée.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-275">It makes for a less busy trace.</span></span>
- <span data-ttu-id="6d7b9-276">*Videz votre cache de résolution DNS sur l’ordinateur client* : vous obtiendrez une place vierge lorsque vous commencerez à effectuer votre capture, pour un suivi plus clair.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-276">*Flush your DNS resolver cache on the client computer*  - This will give you a clean slate when you start to take your capture, for a cleaner trace.</span></span>

## <a name="common-issues"></a><span data-ttu-id="6d7b9-277">Problèmes courants</span><span class="sxs-lookup"><span data-stu-id="6d7b9-277">Common issues</span></span>

<span data-ttu-id="6d7b9-278">Certains problèmes courants que vous pouvez rencontrer et comment les trouver dans votre suivi réseau.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-278">Some common issues you may face and how to find them in your Network trace.</span></span>

### <a name="tcp-windows-scaling"></a><span data-ttu-id="6d7b9-279">Mise à l’échelle TCP Windows</span><span class="sxs-lookup"><span data-stu-id="6d7b9-279">TCP Windows Scaling</span></span>

<span data-ttu-id="6d7b9-280">Trouvé dans le SYN-SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-280">Found in the SYN - SYN/ACK.</span></span> <span data-ttu-id="6d7b9-281">Le matériel hérité ou âgé ne peut pas tirer parti de la mise à l’échelle Windows TCP.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-281">Legacy or aging hardware may not take advantage of TCP windows scaling.</span></span>  <span data-ttu-id="6d7b9-282">Sans paramètres de mise à l’échelle Windows TCP appropriés, la mémoire tampon de 16 bits par défaut dans les en-têtes TCP est exprimée en millisecondes.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-282">Without proper TCP windows scaling settings, the default 16-bit buffer in TCP headers fills in milliseconds.</span></span>  <span data-ttu-id="6d7b9-283">Le trafic ne peut pas continuer à envoyer jusqu’à ce que le client reçoive un accusé de réception indiquant que les données d’origine ont été reçues, provoquant des retards.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-283">Traffic cannot continue to send until the client receives an acknowledgment that the original data has been received, causing delays.</span></span>

#### <a name="tools"></a><span data-ttu-id="6d7b9-284">Outils</span><span class="sxs-lookup"><span data-stu-id="6d7b9-284">Tools</span></span>

- <span data-ttu-id="6d7b9-285">Moniteur</span><span class="sxs-lookup"><span data-stu-id="6d7b9-285">Netmon</span></span>
- <span data-ttu-id="6d7b9-286">Wireshark</span><span class="sxs-lookup"><span data-stu-id="6d7b9-286">Wireshark</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="6d7b9-287">Éléments à rechercher</span><span class="sxs-lookup"><span data-stu-id="6d7b9-287">What to look for</span></span>

<span data-ttu-id="6d7b9-288">Recherchez le trafic SYN-SYN/ACK dans votre suivi réseau.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-288">Look for the SYN - SYN/ACK traffic in your network trace.</span></span>  <span data-ttu-id="6d7b9-289">Dans NetMon, utilisez un filtre comme `tcp.flags.syn == 1`.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-289">In Netmon, use a filter like  `tcp.flags.syn == 1`.</span></span> <span data-ttu-id="6d7b9-290">Ce filtre est le même dans Wireshark.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-290">This filter is the same in Wireshark.</span></span>  

![Filtre dans Netmon ou Wireshark pour les paquets SYN pour les deux outils: TCP. Flags. syn = = 1.](media/4b9a12a1-c915-43c8-ac2f-a679d0435a29.PNG)

<span data-ttu-id="6d7b9-292">Notez que, pour chaque SYN, il existe un numéro de port source (SrcPort) qui est mis en correspondance dans le port de destination (DstPort) de l’accusé de réception associé (SYN/ACK).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-292">Notice that for every SYN there is a source port (SrcPort) number that is matched in the destination port (DstPort) of the related Acknowledgment (SYN/ACK).</span></span>

<span data-ttu-id="6d7b9-293">Pour afficher la valeur de mise à l’échelle Windows utilisée par votre connexion réseau, développez d’abord le SYN, puis le SYN/ACK associé.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-293">To see the Windows Scaling value that is used by your network connection, expand first the SYN, and then the related SYN/ACK.</span></span>  

![Graphique montrant comment faire correspondre SrcPort à DstPort dans un suivi, pour obtenir le delta de temps.](media/6a4ca573-0253-4fbd-93e8-92821ee1c351.png)  

### <a name="tcp-idle-time-settings"></a><span data-ttu-id="6d7b9-295">Paramètres de durée d’inactivité TCP</span><span class="sxs-lookup"><span data-stu-id="6d7b9-295">TCP Idle Time Settings</span></span>

<span data-ttu-id="6d7b9-296">Traditionnellement, la plupart des réseaux de périmètre sont configurés pour les connexions temporaires, ce qui signifie que les connexions inactives sont généralement terminées.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-296">Historically, most perimeter networks are configured for transient connections, meaning idle connections are generally terminated.</span></span> <span data-ttu-id="6d7b9-297">Les sessions TCP inactives peuvent se terminer par des proxys et des pare-feu dont la taille est supérieure à 100 à 300 secondes.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-297">Idle TCP sessions can be terminated by proxies and firewalls at greater than 100 to 300 seconds.</span></span> <span data-ttu-id="6d7b9-298">Cela pose problème pour Outlook Online, car il crée et utilise des connexions à long terme, qu’ils soient inactifs ou non.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-298">This is problematic for Outlook Online because it creates and uses long-term connections, whether they are idle or not.</span></span>  

<span data-ttu-id="6d7b9-299">Lorsque les connexions sont terminées par des périphériques proxy ou pare-feu, le client n’est pas informé et une tentative d’utilisation d’Outlook Online signifie qu’un ordinateur client essaiera, de manière répétée, de rétablir la connexion avant d’en créer une nouvelle.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-299">When connections are terminated by proxy or firewall devices, the client is not informed, and an attempt to use Outlook Online will mean a client computer will try, repeatedly, to revive the connection before making a new one.</span></span> <span data-ttu-id="6d7b9-300">Le produit, les invites ou le ralentissement des performances lors du chargement de la page peuvent apparaître.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-300">You may see hangs in the product, prompts, or slow performance on page load.</span></span>

#### <a name="tools"></a><span data-ttu-id="6d7b9-301">Outils</span><span class="sxs-lookup"><span data-stu-id="6d7b9-301">Tools</span></span>

- <span data-ttu-id="6d7b9-302">Moniteur</span><span class="sxs-lookup"><span data-stu-id="6d7b9-302">Netmon</span></span>
- <span data-ttu-id="6d7b9-303">Wireshark</span><span class="sxs-lookup"><span data-stu-id="6d7b9-303">Wireshark</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="6d7b9-304">Éléments à rechercher</span><span class="sxs-lookup"><span data-stu-id="6d7b9-304">What to look for</span></span>

<span data-ttu-id="6d7b9-305">Dans NetMon, examinez le champ décalage temporel d’un aller-retour.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-305">In Netmon, look at the Time Offset field for a round-trip.</span></span> <span data-ttu-id="6d7b9-306">Un aller-retour est le temps écoulé entre le client envoyant une demande au serveur et la réception d’une réponse.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-306">A round-trip is the time between client sending a request to the server and receiving a response back.</span></span> <span data-ttu-id="6d7b9-307">Vérifiez le client et le point de sortie (par exemple,</span><span class="sxs-lookup"><span data-stu-id="6d7b9-307">Check between the Client and the egress point (ex.</span></span> <span data-ttu-id="6d7b9-308">Client--\> proxy) ou le client vers Office 365 (client--\> Office 365).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-308">Client --\> Proxy), or the Client to Office 365 (Client --\> Office 365).</span></span> <span data-ttu-id="6d7b9-309">Vous pouvez le voir dans la plupart des types de paquets.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-309">You can see this in many types of packets.</span></span>

<span data-ttu-id="6d7b9-310">Par exemple, le filtre de Netmon peut ressembler `.Protocol.IPv4.Address == 10.102.14.112 AND .Protocol.IPv4.Address == 10.201.114.12`ou, dans Wireshark, `ip.addr == 10.102.14.112 &amp;&amp; ip.addr == 10.201.114.12`.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-310">As an example, the filter in Netmon may look like  `.Protocol.IPv4.Address == 10.102.14.112 AND .Protocol.IPv4.Address == 10.201.114.12`, or, in Wireshark,  `ip.addr == 10.102.14.112 &amp;&amp; ip.addr == 10.201.114.12`.</span></span>  

> [!TIP]
> <span data-ttu-id="6d7b9-311">Vous ne saurez pas si l’adresse IP de votre suivi appartient à votre serveur DNS?</span><span class="sxs-lookup"><span data-stu-id="6d7b9-311">Don't know if the IP address in your trace belongs to your DNS server?</span></span> <span data-ttu-id="6d7b9-312">Essayez de le trouver sur la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-312">Try looking it up at the command line.</span></span> <span data-ttu-id="6d7b9-313">Cliquez **sur Démarrer** \> \*\*\*\* \> , puis **tapez cmd**ou appuyez sur la **touche** \> Windows et tapez **cmd**.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-313">Click **Start** \> **Run** \> and type **cmd**, or press **Windows Key** \> and type **cmd**.</span></span> <span data-ttu-id="6d7b9-314">À l’invite, tapez `nslookup <the IP address from the network trace>`.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-314">At the prompt, type  `nslookup <the IP address from the network trace>`.</span></span> <span data-ttu-id="6d7b9-315">Pour tester, utilisez nslookup sur l’adresse IP de votre propre ordinateur.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-315">To test, use nslookup against your own computer's IP address.</span></span> <span data-ttu-id="6d7b9-316">> pour afficher la liste des plages d’adresses IP de Microsoft, consultez la rubrique [Office 365 URL and IP address Ranges](https://technet.microsoft.com/en-us/library/hh373144.aspx).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-316">> To see a list of Microsoft's IP ranges, see [Office 365 URLs and IP address ranges](https://technet.microsoft.com/en-us/library/hh373144.aspx).</span></span>

<span data-ttu-id="6d7b9-317">S’il y a un problème, attendez que des décalages longs apparaissent, dans ce cas (Outlook Online), en particulier dans TLS: les paquets TLS qui montrent le passage des données d’application (par exemple, dans NetMon, vous pouvez trouver des `.Protocol.TLS AND Description == "TLS:TLS Rec Layer-1 SSL Application Data"`paquets de données d’application via).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-317">If there is a problem, expect long Time Offsets to appear, in this case (Outlook Online), particularly in TLS:TLS packets that show the passage of Application Data (for example, in Netmon you can find application data packets via  `.Protocol.TLS AND Description == "TLS:TLS Rec Layer-1 SSL Application Data"`).</span></span> <span data-ttu-id="6d7b9-318">Vous devriez voir une progression progressive dans le temps pendant la session.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-318">You should see a smooth progression in the time across the session.</span></span> <span data-ttu-id="6d7b9-319">Si vous constatez des délais longs lors de l’actualisation de votre Outlook Online, cela peut être dû à l’envoi d’un niveau élevé de réinitialisations.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-319">If you see long delays when refreshing your Outlook Online, this could be caused by a high degree of resets being sent.</span></span>

### <a name="latencyround-trip-time"></a><span data-ttu-id="6d7b9-320">Durée de la latence/boucle</span><span class="sxs-lookup"><span data-stu-id="6d7b9-320">Latency/Round Trip Time</span></span>

<span data-ttu-id="6d7b9-321">La latence est une mesure qui peut modifier un lot en fonction de nombreuses variables, telles que la mise à niveau des appareils d’antériorité, l’ajout d’un grand nombre d’utilisateurs à un réseau et le pourcentage de bande passante globale consommée par d’autres tâches sur une connexion réseau.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-321">Latency is a measure that can change a lot depending on many variables, such upgrading aging devices, adding a large number of users to a network, and the percentage of overall bandwidth consumed by other tasks on a network connection.</span></span>

<span data-ttu-id="6d7b9-322">Il existe des calculatrices de bande passante pour Office 365 disponible à partir de cette page [planification et optimisation des performances pour office 365](network-planning-and-performance.md) .</span><span class="sxs-lookup"><span data-stu-id="6d7b9-322">There are bandwidth calculators for Office 365 available from this [Network planning and performance tuning for Office 365](network-planning-and-performance.md) page.</span></span>  

<span data-ttu-id="6d7b9-323">Vous avez besoin de mesurer la vitesse de votre connexion ou la bande passante de votre connexion ISP?</span><span class="sxs-lookup"><span data-stu-id="6d7b9-323">Need to measure the speed of your connection, or your ISP connection's bandwidth?</span></span> <span data-ttu-id="6d7b9-324">Essayez ce site (ou des sites similaires): [site officiel speedtest](https://www.speedtest.net/)et [Pingtest](http://www.pingtest.net/).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-324">Try this site (or sites like it): [Speedtest Official Site](https://www.speedtest.net/), and [Pingtest](http://www.pingtest.net/).</span></span>

#### <a name="tools"></a><span data-ttu-id="6d7b9-325">Outils</span><span class="sxs-lookup"><span data-stu-id="6d7b9-325">Tools</span></span>

- <span data-ttu-id="6d7b9-326">Interroge</span><span class="sxs-lookup"><span data-stu-id="6d7b9-326">Ping</span></span>
- <span data-ttu-id="6d7b9-327">PsPing</span><span class="sxs-lookup"><span data-stu-id="6d7b9-327">PsPing</span></span>
- <span data-ttu-id="6d7b9-328">Moniteur</span><span class="sxs-lookup"><span data-stu-id="6d7b9-328">Netmon</span></span>
- <span data-ttu-id="6d7b9-329">Wireshark</span><span class="sxs-lookup"><span data-stu-id="6d7b9-329">Wireshark</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="6d7b9-330">Éléments à rechercher</span><span class="sxs-lookup"><span data-stu-id="6d7b9-330">What to look for</span></span>

<span data-ttu-id="6d7b9-331">Pour suivre la latence dans un suivi, vous pouvez avoir enregistré l’adresse IP de l’ordinateur client et l’adresse IP du serveur DNS dans Office 365.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-331">To track latency in a trace, you will benefit from having recorded the client computer IP address and the IP address of the DNS server in Office 365.</span></span> <span data-ttu-id="6d7b9-332">Ceci est destiné à faciliter le filtrage du suivi.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-332">This is for the purpose of easier trace filtering.</span></span> <span data-ttu-id="6d7b9-333">Si vous vous connectez via un proxy, vous aurez besoin de l’adresse IP de votre ordinateur client, de l’adresse IP proxy/sortie et de l’adresse IP DNS de l’Office 365 pour faciliter le travail.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-333">If you connect through a proxy, you will need your client computer IP address, the proxy/egress IP address, and the Office 365 DNS IP address, to make the work easier.</span></span>  

<span data-ttu-id="6d7b9-334">Une requête ping envoyée à outlook.office365.com vous indique le nom du centre de donneur qui reçoit la demande, même si la commande ping ne *peut* pas se connecter pour envoyer la marque de paquets ICMP consécutifs.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-334">A ping request sent to outlook.office365.com will tell you the name of the datacenter receiving the request, even if ping  *may*  not be able to connect to send the trademark consecutive ICMP packets.</span></span> <span data-ttu-id="6d7b9-335">Si vous utilisez PsPing (outil gratuit pour le téléchargement) et que vous souhaitez utiliser le port (443), et peut-être utiliser IPv4 (-4), vous obtiendrez un temps d’aller-retour moyen pour les paquets envoyés.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-335">If you use PsPing (a free tool for download), and specific the port (443) and perhaps to use IPv4 (-4) you will get an average round-trip-time for packets sent.</span></span> <span data-ttu-id="6d7b9-336">Cela fonctionnera pour les autres URL dans les services Office 365, comme `psping -4 yourSite.sharepoint.com:443`.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-336">This will work this for other URLs in the Office 365 services, like `psping -4 yourSite.sharepoint.com:443`.</span></span> <span data-ttu-id="6d7b9-337">En fait, vous pouvez spécifier un nombre de commandes ping pour obtenir un échantillon plus large pour votre moyenne, essayer une `psping -4 -n 20 yourSite-my.sharepoint.com:443`autre solution.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-337">In fact, you can specify a number of pings to get a larger sample for your average, try something like `psping -4 -n 20 yourSite-my.sharepoint.com:443`.</span></span>  

> [!NOTE]
> <span data-ttu-id="6d7b9-338">PsPing n’envoie pas de paquets ICMP.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-338">PsPing doesn't send ICMP packets.</span></span> <span data-ttu-id="6d7b9-339">Il envoie une commande ping avec des paquets TCP sur un port spécifique, de sorte que vous pouvez utiliser l’un de ceux que vous connaissez comme étant ouverts.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-339">It pings with TCP packets over a specific port, so you can use any one you know to be open.</span></span> <span data-ttu-id="6d7b9-340">Dans Office 365, qui utilise SSL/TLS, essayez d’attacher le port: 443 à votre PsPing.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-340">In Office 365, which uses SSL/TLS, try attaching port :443 to your PsPing.</span></span>

![Capture d’écran illustrant un test de résolution des problèmes de outlook.office365.com et PSPing avec le 443, qui fait de même, mais signalent également un temps RTT moyen de 6,5 ms.](media/c64339f2-2c96-45b8-b168-c2a060430266.PNG)

<span data-ttu-id="6d7b9-342">Si vous avez chargé la page Office 365 à faible exécution lors d’une trace réseau, vous devez filtrer un Netmon ou un `DNS`suivi Wireshark pour.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-342">If you loaded the slow performing Office 365 page while doing a network trace, you should filter a Netmon or Wireshark trace for `DNS`.</span></span> <span data-ttu-id="6d7b9-343">Il s’agit de l’une des adresses IP que nous recherchons.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-343">This is one of the IPs we're looking for.</span></span>  

<span data-ttu-id="6d7b9-344">Voici les étapes à suivre pour filtrer votre Netmon afin d’obtenir l’adresse IP (et jetez un œil à la latence DNS).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-344">Here are the steps to take to filter your Netmon to get the IP address (and take a look at DNS Latency).</span></span> <span data-ttu-id="6d7b9-345">Cet exemple utilise outlook.office365.com, mais peut également utiliser l’URL d’un client SharePoint Online (hithere.sharepoint.com par exemple).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-345">This example uses outlook.office365.com, but may also use the URL of a SharePoint Online tenant (hithere.sharepoint.com for example).</span></span>  

1. <span data-ttu-id="6d7b9-346">Exécutez une commande `ping outlook.office365.com` ping sur l’URL et, dans les résultats, enregistrez le nom et l’adresse IP du serveur DNS auquel la demande Ping a été envoyée.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-346">Ping the URL `ping outlook.office365.com` and, in the results, record the name and IP address of the DNS server the ping request was sent to.</span></span>
2. <span data-ttu-id="6d7b9-347">Suivi réseau l’ouverture de la page, ou l’exécution de l’action qui vous donne le problème de performances, ou si vous voyez une latence élevée sur le ping, lui-même, suivi du réseau.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-347">Network trace opening the page, or doing the action that gives you the performance problem, or, if you see a high latency on the ping, itself, network trace it.</span></span>
3. <span data-ttu-id="6d7b9-348">Ouvrez le suivi dans Netmon et filtre pour DNS (ce filtre fonctionne également dans Wireshark, mais il est sensible à `-- dns`la casse).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-348">Open the trace in Netmon and filter for DNS (this filter also works in Wireshark, but is sensitive to case `-- dns`).</span></span> <span data-ttu-id="6d7b9-349">Étant donné que vous connaissiez le nom du serveur DNS de votre ping, vous pouvez également filtrer plus rapidement dans Netmon comme `DNS AND ContainsBin(FrameData, ASCII, "namnorthwest")`suit:, qui se présente comme suit dans Wireshark DNS et frame contient «namnorthwest».</span><span class="sxs-lookup"><span data-stu-id="6d7b9-349">Since you know the name of the DNS server from your ping you may also filter more speedily in Netmon like this: `DNS AND ContainsBin(FrameData, ASCII, "namnorthwest")`, which looks like this in Wireshark dns and frame contains "namnorthwest".</span></span><br/><span data-ttu-id="6d7b9-350">Ouvrez le paquet de réponse, puis, dans la fenêtre **Détails** de trame NetMon, cliquez sur **DNS** pour développer plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-350">Open the response packet and, in the Netmon **Frame Details** window, click **DNS** to expand for more information.</span></span> <span data-ttu-id="6d7b9-351">Dans les informations DNS, vous trouverez l’adresse IP du serveur DNS vers lequel la demande est passée dans Office 365.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-351">In the DNS information you'll find the IP address of the DNS server the request went to in Office 365.</span></span> <span data-ttu-id="6d7b9-352">Vous aurez besoin de cette adresse IP pour l’étape suivante (l’outil PsPing).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-352">You'll need this IP address for the next step (the PsPing tool).</span></span> <span data-ttu-id="6d7b9-353">Supprimez le filtre, cliquez avec le bouton droit sur la réponse DNS dans Netmon (**Résumé** \> des trames **Rechercher** \> **DNS**) pour afficher la requête DNS et la réponse côte à côte.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-353">Remove the filter, right-click on the DNS Response in Netmon (**Frame Summary** \> **Find Conversations** \> **DNS**) to see the DNS Query and Response side-by-side.</span></span>
4. <span data-ttu-id="6d7b9-354">Dans NetMon, Notez également la colonne décalage horaire entre la demande DNS et la réponse.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-354">In Netmon, also note the Time Offset  column between the DNS Request and Response.</span></span> <span data-ttu-id="6d7b9-355">Dans l’étape suivante, l’outil de [PsPing](https://technet.microsoft.com/en-us/sysinternals/jj729731.aspx) facile à installer et à utiliser est très utile, car ICMP est souvent bloqué sur les pare-feu, et dans la mesure où PsPing suit de manière élégante la latence en millisecondes.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-355">In the next step, the easy-to-install and use [PsPing](https://technet.microsoft.com/en-us/sysinternals/jj729731.aspx) tool comes in very handy, both because ICMP is often blocked on Firewalls, and because PsPing elegantly tracks latency in milliseconds.</span></span> <span data-ttu-id="6d7b9-356">PsPing termine une connexion TCP à une adresse et un port (dans notre cas, ouvrez le port 443).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-356">PsPing completes a TCP connection to an address and port (in our case open port 443).</span></span>
5. <span data-ttu-id="6d7b9-357">Installez PsPing.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-357">Install PsPing.</span></span>
6. <span data-ttu-id="6d7b9-358">Ouvrez une invite de commandes ( \> Start \> Run type cmd ou Windows Key \> type cmd) et modifiez Directory dans le répertoire où vous avez installé PsPing pour exécuter la commande PsPing.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-358">Open a command prompt (Start \> Run \> type cmd, or Windows Key \> type cmd) and change directory to the directory where you installed PsPing to run the PsPing command.</span></span> <span data-ttu-id="6d7b9-359">Dans mes exemples, j’ai créé un dossier «perf» à la racine de C. Vous pouvez effectuer la même opération pour un accès rapide.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-359">In my examples you can see I made a 'Perf' folder on the root of C. You can do the same for quick access.</span></span>
7. <span data-ttu-id="6d7b9-360">Tapez la commande pour effectuer votre PsPing par rapport à l’adresse IP du serveur DNS Office 365 à partir de votre trace Netmon précédente, y compris le numéro de port `psping -n 20 132.245.24.82:445`, comme.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-360">Type the command so that you're making your PsPing against the IP address of the Office 365 DNS server from your earlier Netmon trace, including the port number, like `psping -n 20 132.245.24.82:445`.</span></span> <span data-ttu-id="6d7b9-361">Vous obtiendrez ainsi un échantillon de 20 pings et la latence moyenne lors de l’arrêt d’PsPing.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-361">This will give you a sampling of 20 pings and average the latency when PsPing stops.</span></span>

<span data-ttu-id="6d7b9-362">Si vous accédez à Office 365 via un serveur proxy, les étapes sont légèrement différentes.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-362">If you're going to Office 365 through a proxy server, the steps are a little different.</span></span> <span data-ttu-id="6d7b9-363">Vous devez d’abord PsPing sur votre serveur proxy pour obtenir une valeur de latence moyenne en millisecondes pour proxy/sortie et retour, puis exécutez PsPing sur le proxy ou sur un ordinateur disposant d’une connexion Internet directe pour obtenir la valeur manquante (celle à Office 365 et inversement).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-363">You would first PsPing to your proxy server to get an average latency value in milliseconds to proxy/egress and back, and then either run PsPing on the proxy, or on a computer with a direct Internet connection to get the missing value (the one to Office 365 and back).</span></span>  

<span data-ttu-id="6d7b9-364">Si vous choisissez d’exécuter PsPing à partir du proxy, vous aurez deux millisecondes: ordinateur client à proxy ou point de sortie, et serveur proxy vers Office 365.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-364">If you choose to run PsPing from the proxy, you'll have two millisecond values: Client computer to proxy server or egress point, and proxy server to Office 365.</span></span> <span data-ttu-id="6d7b9-365">Et vous avez fini!</span><span class="sxs-lookup"><span data-stu-id="6d7b9-365">And you're done!</span></span> <span data-ttu-id="6d7b9-366">Enregistrez les valeurs, quand même.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-366">Well, recording values, anyway.</span></span>  

<span data-ttu-id="6d7b9-367">Si vous exécutez PsPing sur un autre ordinateur client disposant d’une connexion directe à Internet, c’est-à-dire sans proxy, vous aurez deux millisecondes: ordinateur client à proxy ou point de sortie, et ordinateur client vers Office 365.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-367">If you run PsPing on another client computer that has a direct connection to the Internet, that is, without a proxy, you will have two millisecond values: Client computer to proxy server or egress point, and client computer to Office 365.</span></span> <span data-ttu-id="6d7b9-368">Dans ce cas, soustrayez la valeur de l’ordinateur client au serveur proxy ou de sortie de la valeur de l’ordinateur client vers Office 365, et vous aurez les chiffres RTT de votre ordinateur client vers le serveur proxy ou vers le point de sortie, ainsi qu’entre Proxy Server ou sortie pointer vers offi ce 365.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-368">In this case, subtract the value of client computer to proxy server or egress point from the value of client computer to Office 365, and you will have the RTT numbers from your client computer to the proxy server or egress point, and from proxy server or egress point to Office 365.</span></span>

<span data-ttu-id="6d7b9-369">Toutefois, si vous trouvez un ordinateur client dans l’emplacement concerné directement connecté ou si vous contournez le proxy, vous pouvez choisir de voir si le problème se reproduit et de le tester par la suite.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-369">However, if you can find a client computer in the impacted location that is directly connected, or bypasses the proxy, you may choose to see if the issue reproduces there to begin with, and test using it thereafter.</span></span>

<span data-ttu-id="6d7b9-370">Latence, comme dans un suivi NetMon, ces millisecondes supplémentaires peuvent être additionnées s’il y en a suffisamment dans une session donnée.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-370">Latency, as seen in a Netmon trace, those extra milliseconds can add up, if there are enough of them in any given session.</span></span>  

![Latence générale dans Netmon, avec la colonne Délai par défaut Netmon ajoutée au Résumé de la trame.](media/7ad17380-8527-4bc2-9b9b-6310cf19ba6b.PNG)

> [!NOTE]
> <span data-ttu-id="6d7b9-372">Votre adresse IP peut être différente de celle indiquée ici, par exemple, votre commande ping peut renvoyer une valeur similaire à 157.56.0.0/16 ou à une plage similaire.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-372">Your IP address may be different than the IPs shown here, for example, your ping may return something more like 157.56.0.0/16 or a similar range.</span></span> <span data-ttu-id="6d7b9-373">Pour obtenir la liste des plages utilisées par Office 365, consultez les [URL et les plages d’adresses IP office 365](https://technet.microsoft.com/en-us/library/hh373144.aspx).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-373">For a list of ranges used by Office 365, check out [Office 365 URLs and IP address ranges](https://technet.microsoft.com/en-us/library/hh373144.aspx).</span></span>

<span data-ttu-id="6d7b9-374">N’oubliez pas de développer tous les nœuds (il y a un bouton en haut de la page) si vous souhaitez effectuer une recherche, par exemple, 132,245.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-374">Remember to expand all the nodes (there's a button at the top for this) if you want to search for, for example, 132.245.</span></span>

### <a name="proxy-authentication"></a><span data-ttu-id="6d7b9-375">Authentification par proxy</span><span class="sxs-lookup"><span data-stu-id="6d7b9-375">Proxy Authentication</span></span>

<span data-ttu-id="6d7b9-376">Ceci s’applique uniquement si vous passez par un serveur proxy.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-376">This only applies to you if you're going through a proxy server.</span></span> <span data-ttu-id="6d7b9-377">Si ce n’est pas le cas, vous pouvez ignorer ces étapes.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-377">If not, you can skip these steps.</span></span> <span data-ttu-id="6d7b9-378">Lorsque le travail fonctionne correctement, l’authentification proxy doit être effectuée en millisecondes, de manière cohérente.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-378">When working properly, proxy authentication should take place in milliseconds, consistently.</span></span> <span data-ttu-id="6d7b9-379">Vous ne devriez pas voir les performances incorrectes intermittentes pendant les périodes d’utilisation maximale (par exemple).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-379">You shouldn't see intermittent bad performance during peak usage periods (for example).</span></span>  

<span data-ttu-id="6d7b9-380">Si l’authentification proxy est activée, chaque fois que vous créez une nouvelle connexion TCP à Office 365 pour obtenir des informations, vous devez passer par un processus d’authentification en arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-380">If Proxy authentication is on, each time you make a new TCP connection to Office 365 to get information, you need to pass through an authentication process behind the scenes.</span></span> <span data-ttu-id="6d7b9-381">Ainsi, par exemple, lors du passage de calendrier à courrier dans Outlook Online, vous vous authentifiez.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-381">So, for example, when switching from Calendar to Mail in Outlook Online, you will authenticate.</span></span> <span data-ttu-id="6d7b9-382">Dans SharePoint Online, si une page affiche des médias ou des données à partir de plusieurs sites ou emplacements, vous vous authentifiez pour chaque connexion TCP requise pour le rendu des données.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-382">And in SharePoint Online, if a page displays media or data from multiple sites or locations, you will authenticate for each different TCP connection that is needed in order to render the data.</span></span>  

<span data-ttu-id="6d7b9-383">Dans Outlook Online, il se peut que vous rencontriez des temps de chargement lents à chaque fois que vous basculez entre le calendrier et votre boîte aux lettres, ou chargez lentement la page dans SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-383">In Outlook Online, you may experience slow load times whenever you switch between Calendar and your mailbox, or slow page loads in SharePoint Online.</span></span> <span data-ttu-id="6d7b9-384">Toutefois, il existe d’autres symptômes non répertoriés ici.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-384">However, there are other symptoms not listed here.</span></span>

<span data-ttu-id="6d7b9-385">L’authentification proxy est un paramètre de votre serveur proxy de sortie.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-385">Proxy authentication is a setting on your egress proxy server.</span></span> <span data-ttu-id="6d7b9-386">Si elle provoque un problème de performances avec Office 365, vous devez consulter votre équipe réseau.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-386">If it is causing a performance issue with Office 365, you must consult your networking team.</span></span>  

#### <a name="tools"></a><span data-ttu-id="6d7b9-387">Outils</span><span class="sxs-lookup"><span data-stu-id="6d7b9-387">Tools</span></span>

- <span data-ttu-id="6d7b9-388">Moniteur</span><span class="sxs-lookup"><span data-stu-id="6d7b9-388">Netmon</span></span>
- <span data-ttu-id="6d7b9-389">Wireshark</span><span class="sxs-lookup"><span data-stu-id="6d7b9-389">Wireshark</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="6d7b9-390">Éléments à rechercher</span><span class="sxs-lookup"><span data-stu-id="6d7b9-390">What to look for</span></span>

<span data-ttu-id="6d7b9-391">L’authentification par proxy a lieu chaque fois qu’une nouvelle session TCP doit être lancée, généralement pour demander des fichiers ou des informations à partir du serveur, ou pour fournir des informations.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-391">Proxy authentication takes place whenever a new TCP session must be spun up, commonly to request files or info from the server, or to supply info.</span></span> <span data-ttu-id="6d7b9-392">Par exemple, vous pouvez voir l’authentification proxy pour les requêtes HTTP GET ou HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-392">For example, you may see proxy authentication around HTTP GET or HTTP POST requests.</span></span> <span data-ttu-id="6d7b9-393">Si vous souhaitez voir les cadres dans lesquels vous authentifiez les demandes dans votre suivi, ajoutez la colonne «Résumé NTLMSSP» à netmon et filtrez `.property.NTLMSSPSummary`.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-393">If you want to see the frames where you are authenticating requests in your trace, add the 'NTLMSSP Summary' column to Netmon and filter for  `.property.NTLMSSPSummary`.</span></span> <span data-ttu-id="6d7b9-394">Pour connaître la durée de l’authentification, ajoutez la colonne Delta du temps.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-394">To see how long the authentication is taking, add the Time Delta column.</span></span>

<span data-ttu-id="6d7b9-395">Pour ajouter une colonne à netmon:</span><span class="sxs-lookup"><span data-stu-id="6d7b9-395">To add a column to Netmon:</span></span>

1. <span data-ttu-id="6d7b9-396">Cliquez avec le bouton droit sur une colonne telle que **Description**.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-396">Right-click on a column such as **Description**.</span></span>
2. <span data-ttu-id="6d7b9-397">Cliquez sur **choisir des colonnes**.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-397">Click **Choose Columns**.</span></span>
3. <span data-ttu-id="6d7b9-398">Recherchez le _Résumé NTLMSSP_ et le _delta de temps_ dans la liste, puis cliquez sur **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-398">Locate _NTLMSSP Summary_ and _Time Delta_ in the list and click **Add**.</span></span>
4. <span data-ttu-id="6d7b9-399">Déplacez les nouvelles colonnes en place avant ou après la colonne _Description_ afin de pouvoir les lire côte à côte.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-399">Move the new columns into place before or behind the _Description_ column so you can read them side-by-side.</span></span>
5. <span data-ttu-id="6d7b9-400">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-400">Click **OK**.</span></span>

<span data-ttu-id="6d7b9-401">Même si vous n’ajoutez pas la colonne, le filtre Netmon fonctionnera.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-401">Even if you don't add the column, the Netmon filter will work.</span></span> <span data-ttu-id="6d7b9-402">Toutefois, votre dépannage est beaucoup plus facile si vous pouvez voir l’étape de l’authentification dans laquelle vous vous trouvez.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-402">But your troubleshooting will be much easier if you can see what stage of authentication you're in.</span></span>

<span data-ttu-id="6d7b9-403">Lorsque vous recherchez des instances de l’authentification proxy, veillez à étudier toutes les trames pour lesquelles il existe une stimulation NTLM, ou un message d’authentification est présent.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-403">When looking for instances of Proxy Authentication, be sure to study all frames where there is an NTLM Challenge, or an Authenticate Message is present.</span></span> <span data-ttu-id="6d7b9-404">Si nécessaire, cliquez avec le bouton droit sur l’élément de trafic spécifique \> et recherchez TCP conversations.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-404">If necessary, right-click the specific piece of traffic and Find Conversations \> TCP.</span></span> <span data-ttu-id="6d7b9-405">Gardez à l’esprit les valeurs Delta Time de ces conversations.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-405">Be aware of the Time Delta values in these Conversations.</span></span>

![Suivi Netmon montrant l’authentification proxy, filtré par conversation.](media/b640f176-0a52-4bbb-972e-60fb3d6aece2.PNG)

<span data-ttu-id="6d7b9-407">Un délai de quatre secondes dans l’authentification proxy, comme indiqué dans Wireshark.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-407">A four second delay in proxy authentication as seen in Wireshark.</span></span> <span data-ttu-id="6d7b9-408">Le **delta du temps à partir de la colonne image affichée précédente** a été effectué en cliquant avec le bouton droit sur le champ du même nom dans les détails du cadre et en sélectionnant Ajouter en tant que colonne.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-408">The **Time delta from previous displayed frame** column was made via right-clicking the field of the same name in the frame details and selecting Add as Column.</span></span>  <br/> <span data-ttu-id="6d7b9-409">![Dans Wireshark, la colonne «temps Delta de l’image affichée précédente» peut être effectuée en cliquant avec le bouton droit sur le champ du même nom dans les détails du cadre et en sélectionnant Ajouter en tant que colonne.](media/f5b7bde4-8067-4ee0-bc7f-e9062ce1ba6f.PNG)</span><span class="sxs-lookup"><span data-stu-id="6d7b9-409">![In Wireshark, the 'Time delta from previous displayed frame' column can be made via right-clicking the field of the same name in the frame details and selecting Add as Column.](media/f5b7bde4-8067-4ee0-bc7f-e9062ce1ba6f.PNG)</span></span>

### <a name="dns-performance"></a><span data-ttu-id="6d7b9-410">Performances DNS</span><span class="sxs-lookup"><span data-stu-id="6d7b9-410">DNS Performance</span></span>

<span data-ttu-id="6d7b9-411">La résolution de noms fonctionne de manière optimale et la plus rapide quand elle se trouve à proximité du pays du client.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-411">Name resolution works best and most quickly when it takes place as close to the client's country as possible.</span></span>

<span data-ttu-id="6d7b9-412">Si la résolution de noms DNS a lieu à l’étranger, elle peut ajouter des secondes au chargement de la page.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-412">If DNS name resolution is taking place overseas, it can add seconds to page loads.</span></span> <span data-ttu-id="6d7b9-413">Idéalement, la résolution de noms se produit sous 100 millisecondes.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-413">Ideally, name resolution happens in under 100ms.</span></span> <span data-ttu-id="6d7b9-414">Si ce n’est pas le cas, vous devez procéder à une nouvelle enquête.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-414">If not, you should do further investigation.</span></span>

> [!TIP]
> <span data-ttu-id="6d7b9-415">Vous ne savez pas comment fonctionne la connectivité client dans Office 365?</span><span class="sxs-lookup"><span data-stu-id="6d7b9-415">Not sure how Client Connectivity works in Office 365?</span></span> <span data-ttu-id="6d7b9-416">Consultez [ici](https://technet.microsoft.com/en-us/library/dn741250.aspx)le document de référence de connectivité client.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-416">Take a look at the Client Connectivity Reference document [here](https://technet.microsoft.com/en-us/library/dn741250.aspx).</span></span>

#### <a name="tools"></a><span data-ttu-id="6d7b9-417">Outils</span><span class="sxs-lookup"><span data-stu-id="6d7b9-417">Tools</span></span>

- <span data-ttu-id="6d7b9-418">Moniteur</span><span class="sxs-lookup"><span data-stu-id="6d7b9-418">Netmon</span></span>
- <span data-ttu-id="6d7b9-419">Wireshark</span><span class="sxs-lookup"><span data-stu-id="6d7b9-419">Wireshark</span></span>
- <span data-ttu-id="6d7b9-420">PsPing</span><span class="sxs-lookup"><span data-stu-id="6d7b9-420">PsPing</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="6d7b9-421">Éléments à rechercher</span><span class="sxs-lookup"><span data-stu-id="6d7b9-421">What to look for</span></span>

<span data-ttu-id="6d7b9-422">L’analyse des performances DNS est généralement un autre travail pour un suivi réseau.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-422">Analyzing DNS performance is typically another job for a network trace.</span></span> <span data-ttu-id="6d7b9-423">Toutefois, PsPing est également utile dans le cas d’une cause possible.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-423">However, PsPing is also helpful in ruling in, or out, a possible cause.</span></span>

<span data-ttu-id="6d7b9-424">Le trafic DNS est basé sur les requêtes TCP et UDP, et les réponses sont clairement signalées par un ID permettant de faire correspondre une demande spécifique à sa réponse spécifique.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-424">DNS traffic is based on TCP and UDP requests and responses are clearly marked with an ID that will help to match a specific request with its specific response.</span></span> <span data-ttu-id="6d7b9-425">Vous verrez le trafic DNS lorsque, par exemple, SharePoint Online utilise un nom de réseau ou une URL sur une page Web.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-425">You'll see DNS traffic when, for example, SharePoint Online uses a network name or URL on a web page.</span></span> <span data-ttu-id="6d7b9-426">En règle générale, la majeure partie de ce trafic, sauf lors du transfert de zones, s’exécute via UDP.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-426">As a rule of thumb, most of this traffic, except when transferring Zones, runs over UDP.</span></span>

<span data-ttu-id="6d7b9-427">Dans Netmon et Wireshark, le filtre le plus élémentaire qui vous permettra d’examiner le trafic DNS est simplement `dns`.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-427">In both Netmon and Wireshark, the most basic filter that will let you look at DNS traffic is simply `dns`.</span></span> <span data-ttu-id="6d7b9-428">Veillez à utiliser les minuscules lorsque vous spécifiez le filtre.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-428">Be sure to use lower case when specifying the filter.</span></span> <span data-ttu-id="6d7b9-429">N’oubliez pas de vider votre cache de résolution DNS avant de commencer à reproduire le problème sur votre ordinateur client.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-429">Remember to flush your DNS resolver cache before you begin to reproduce the issue on your client computer.</span></span> <span data-ttu-id="6d7b9-430">Par exemple, si vous avez une charge de pages SharePoint Online lente pour la page d’accueil, fermez tous les navigateurs, ouvrez un nouveau navigateur, démarrez le suivi, videz le cache de résolution DNS et accédez à votre site SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-430">For example, if you have a slow SharePoint Online page load for the Home page, you should close all browsers, open a new browser, start tracing, flush your DNS resolver cache, and browse to your SharePoint Online site.</span></span> <span data-ttu-id="6d7b9-431">Une fois la page entière résolue, vous devez arrêter et enregistrer la trace.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-431">Once the entire page resolves, you should stop and save the trace.</span></span>

![Un filtre de base pour DNS dans Netmon est DNS.](media/1bebc118-ca13-45f3-803f-ab73e7af401d.png)

<span data-ttu-id="6d7b9-433">Vous souhaitez consulter le décalage temporel ici.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-433">You want to look at the time offset here.</span></span> <span data-ttu-id="6d7b9-434">Et il peut être utile d’ajouter la colonne **Delta Time** à netmon en procédant comme suit:</span><span class="sxs-lookup"><span data-stu-id="6d7b9-434">And it may be helpful to add the **Time Delta** column to Netmon which you can do by completing these steps:</span></span>

1. <span data-ttu-id="6d7b9-435">Cliquez avec le bouton droit sur une colonne telle que **Description**.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-435">Right-click on a column such as **Description**.</span></span>
2. <span data-ttu-id="6d7b9-436">Cliquez sur **choisir des colonnes**.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-436">Click **Choose Columns**.</span></span>
3. <span data-ttu-id="6d7b9-437">Recherchez _delta de temps_ dans la liste, puis cliquez sur **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-437">Locate _Time Delta_ in the list and click **Add**.</span></span>
4. <span data-ttu-id="6d7b9-438">Déplacez la nouvelle colonne en place avant ou après la colonne _Description_ afin de pouvoir les lire côte à côte.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-438">Move the new column into place before or behind the _Description_ column so you can read them side-by-side.</span></span>
5. <span data-ttu-id="6d7b9-439">Cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-439">Click **OK**.</span></span>

<span data-ttu-id="6d7b9-440">Si vous trouvez une requête d’intérêt, envisagez de l’isoler en cliquant avec le bouton droit sur cette requête dans le panneau Détails du cadre, puis en choisissant Rechercher le **DNS**des **conversations** \> .</span><span class="sxs-lookup"><span data-stu-id="6d7b9-440">If you find a query of interest, consider isolating it by right-clicking that query in the frame details panel, choosing **Find Conversations** \> **DNS**.</span></span> <span data-ttu-id="6d7b9-441">Notez que le panneau conversations réseau passe directement à la conversation spécifique dans son journal de trafic UDP.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-441">Notice that the Network Conversations panel jumps right to the specific conversation in its log of UDP traffic.</span></span>

![Un suivi Netmon de la charge d’Outlook Online filtré par DNS et l’utilisation de rechercher des conversations puis du DNS pour limiter les résultats.](media/763cf20e-7b48-4a37-9449-c9978cfe118b.PNG)

<span data-ttu-id="6d7b9-443">Dans Wireshark, vous pouvez créer une colonne pour les heures de DNS.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-443">In Wireshark you can make a column for DNS time.</span></span> <span data-ttu-id="6d7b9-444">Effectuez votre suivi (ou ouvrez un suivi) dans Wireshark et filtrez `dns`-le ou, plus particulièrement, `dns.time`.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-444">Take your trace (or open a trace) in Wireshark and filter by `dns`, or, more helpfully,  `dns.time`.</span></span> <span data-ttu-id="6d7b9-445">Cliquez sur une requête DNS, puis, dans le volet affichant les détails, développez les `Domain Name System (response)` détails.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-445">Click on any DNS query, and, in the panel showing details, expand the  `Domain Name System (response)` details.</span></span> <span data-ttu-id="6d7b9-446">Vous verrez un champ pour l’heure (par exemple `[Time: 0.001111100 seconds]`,.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-446">You'll see a field for time (for example, `[Time: 0.001111100 seconds]`.</span></span> <span data-ttu-id="6d7b9-447">Cliquez avec le bouton droit sur cette heure et sélectionnez **appliquer en tant que colonne**.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-447">Right-click this time and select **Apply as Column**.</span></span> <span data-ttu-id="6d7b9-448">Cela vous permettra de créer \*\*\*\* un tri plus rapide de votre suivi.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-448">This will give you a **Time** column for quicker sorting of your trace.</span></span> <span data-ttu-id="6d7b9-449">Cliquez sur la nouvelle colonne pour trier les valeurs décroissantes afin de déterminer quel appel DNS a pris le plus de temps à résoudre.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-449">Click on the new column to sort by descending values to see which DNS call took the longest to resolve.</span></span>

[<span data-ttu-id="6d7b9-450">Une recherche sur SharePoint Online filtrée dans Wireshark par dns.time (en minuscules), avec l’heure des détails dans une colonne et triée par ordre croissant.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-450">A browse of SharePoint Online filtered in Wireshark by (lowercase) dns.time, with the time from the details made into a column and sorted ascending.</span></span>](media/1439dcc2-12ff-4ee2-9ef3-1484cf79c384.PNG)

<span data-ttu-id="6d7b9-451">Si vous souhaitez approfondir le temps de résolution DNS, essayez d’effectuer une PsPing sur le port DNS utilisé par TCP (par exemple, `psping <IP address of DNS server>:53`).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-451">If you would like to do more investigation of the DNS resolution time, try a PsPing against the DNS port used by TCP (for example,  `psping <IP address of DNS server>:53`) .</span></span> <span data-ttu-id="6d7b9-452">Y a-t-il toujours un problème de performances?</span><span class="sxs-lookup"><span data-stu-id="6d7b9-452">Do you still see a performance issue?</span></span> <span data-ttu-id="6d7b9-453">Dans ce cas, le problème est plus vraisemblablement lié à un problème réseau plus large que le problème de l’application DNS que vous envisagez de résoudre.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-453">If you do, then the problem is more likely to be a broader network issue than an issue of specific the DNS application you're hitting to do resolution.</span></span> <span data-ttu-id="6d7b9-454">Il est également important de mentionner, là encore, qu’un ping vers outlook.office365.com vous indique où se déroule la résolution de noms DNS pour Outlook Online (par exemple, outlook-namnorthwest.office365.com).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-454">It's also worth mentioning, again, that a ping to outlook.office365.com will tell you where DNS name resolution for Outlook Online is taking place (for example, outlook-namnorthwest.office365.com).</span></span>

<span data-ttu-id="6d7b9-455">Si le problème semble spécifique à DNS, il peut être nécessaire de contacter votre service informatique pour examiner les configurations DNS et les redirecteurs DNS afin d’examiner ce problème.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-455">If the issue looks to be DNS specific, it may be necessary to contact your IT department to look at DNS configurations and DNS Forwarders to further investigate this issue.</span></span>

### <a name="proxy-scalability"></a><span data-ttu-id="6d7b9-456">Évolutivité des proxys</span><span class="sxs-lookup"><span data-stu-id="6d7b9-456">Proxy Scalability</span></span>

<span data-ttu-id="6d7b9-457">Les services tels qu’Outlook Online dans Office 365 accordent aux clients plusieurs connexions à long terme.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-457">Services like Outlook Online in Office 365 grant clients multiple long-term connections.</span></span> <span data-ttu-id="6d7b9-458">Par conséquent, chaque utilisateur peut utiliser plus de connexions qui nécessitent une durée de vie plus longue.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-458">Therefore, each user may use more connections that require a longer life.</span></span>  

#### <a name="tools"></a><span data-ttu-id="6d7b9-459">Outils</span><span class="sxs-lookup"><span data-stu-id="6d7b9-459">Tools</span></span>

<span data-ttu-id="6d7b9-460">Mathématiques</span><span class="sxs-lookup"><span data-stu-id="6d7b9-460">Math</span></span>  

#### <a name="what-to-look-for"></a><span data-ttu-id="6d7b9-461">Éléments à rechercher</span><span class="sxs-lookup"><span data-stu-id="6d7b9-461">What to look for</span></span>

<span data-ttu-id="6d7b9-462">Il n’existe aucun outil de suivi ou de dépannage réseau spécifique à ce.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-462">There is no network trace or troubleshooting tool specific to this.</span></span> <span data-ttu-id="6d7b9-463">Au lieu de cela, il est basé sur des calculs de bande passante et d’autres variables.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-463">Instead, it's based upon bandwidth calculations given limitations and other variables.</span></span>  

### <a name="tcp-max-segment-size"></a><span data-ttu-id="6d7b9-464">Taille maximale du segment TCP</span><span class="sxs-lookup"><span data-stu-id="6d7b9-464">TCP Max Segment Size</span></span>

<span data-ttu-id="6d7b9-465">Trouvé dans le SYN-SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-465">Found in the SYN - SYN/ACK.</span></span>  <span data-ttu-id="6d7b9-466">Effectuez cette vérification dans le suivi du réseau de performances que vous avez utilisé pour vous assurer que les paquets TCP sont configurés pour transporter la quantité maximale de données possible.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-466">Do this check in any performance network trace you've taken to ensure that TCP packets are configured to carry the maximum amount of data possible.</span></span>

<span data-ttu-id="6d7b9-467">L’objectif est d’afficher un MSS de 1460 octets pour la transmission des données.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-467">The goal is to see a MSS of 1460 bytes for transmission of data.</span></span> <span data-ttu-id="6d7b9-468">Si vous êtes protégé par un proxy, ou si vous utilisez un NAT, n’oubliez pas d’exécuter ce test depuis le client vers proxy/sortie/NAT, et de proxy/sortie/NAT vers Office 365 pour obtenir les meilleurs résultats!</span><span class="sxs-lookup"><span data-stu-id="6d7b9-468">If you're behind a proxy, or you are using a NAT, remember to run this test from client to proxy/egress/NAT, and from proxy/egress/NAT to Office 365 for best results!</span></span> <span data-ttu-id="6d7b9-469">Il s’agit de différentes sessions TCP.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-469">These are different TCP sessions.</span></span>

#### <a name="tools"></a><span data-ttu-id="6d7b9-470">Outils</span><span class="sxs-lookup"><span data-stu-id="6d7b9-470">Tools</span></span>

<span data-ttu-id="6d7b9-471">Moniteur</span><span class="sxs-lookup"><span data-stu-id="6d7b9-471">Netmon</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="6d7b9-472">Éléments à rechercher</span><span class="sxs-lookup"><span data-stu-id="6d7b9-472">What to look for</span></span>

<span data-ttu-id="6d7b9-473">La taille maximale de segment TCP (MSS) est un autre paramètre de la connexion à trois voies dans votre suivi réseau, ce qui signifie que vous trouverez les données dont vous avez besoin dans le paquet SYN-SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-473">TCP Max Segment Size (MSS) is another parameter of the three-way handshake in your network trace, that means you'll find the data you need in the SYN - SYN/ACK packet.</span></span> <span data-ttu-id="6d7b9-474">MSS est en fait relativement simple à voir.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-474">MSS is actually pretty simple to see.</span></span>

<span data-ttu-id="6d7b9-475">Ouvrez le suivi du réseau de performances dont vous disposez et trouvez la connexion que vous êtes curieux, ou qui illustre le problème de performances.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-475">Open any performance network trace you have and find the connection you're curious about, or that demonstrates the performance problem.</span></span>

> [!NOTE]
> <span data-ttu-id="6d7b9-476">Si vous examinez un suivi et devez trouver le trafic correspondant à votre conversation, filtrez par l’IP du client ou l’adresse IP du serveur proxy ou du point de sortie, ou les deux.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-476">If you are looking at a trace and need to find the traffic relevant to your conversation, filter by the IP of the Client, or the IP of the proxy server or egress point, or both.</span></span> <span data-ttu-id="6d7b9-477">En accédant directement, vous devrez effectuer un test ping de l’URL que vous testez pour l’adresse IP d’Office 365 dans le suivi, et filtrer par celle-ci.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-477">Going directly, you will need to ping the URL that you're testing for the IP address of Office 365 in the trace, and filter by it.</span></span>

<span data-ttu-id="6d7b9-478">Vous regardez le second stock de suivi?</span><span class="sxs-lookup"><span data-stu-id="6d7b9-478">Looking at the trace second-hand?</span></span> <span data-ttu-id="6d7b9-479">Essayez d’utiliser des filtres pour vous orienter.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-479">Try using filters to orient yourself.</span></span> <span data-ttu-id="6d7b9-480">Dans NetMon, exécutez une recherche basée sur l’URL, par exemple `Containsbin(framedata, ascii, "sphybridExample")`, notez le numéro de trame.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-480">In Netmon, run a search based on the URL, such as `Containsbin(framedata, ascii, "sphybridExample")`, take note of the frame number.</span></span>

<span data-ttu-id="6d7b9-481">Dans Wireshark, utilisez des `frame contains "sphybridExample"`éléments comme.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-481">In Wireshark use something like  `frame contains "sphybridExample"`.</span></span> <span data-ttu-id="6d7b9-482">Si vous remarquez que vous avez trouvé le trafic Winsock (RWS) distant (il peut apparaître sous la forme [PSH, ACK] dans Wireshark), rappelez-vous que RWS connections peuvent être vues peu de points de SYN-SYN/ACK pertinents, comme indiqué précédemment.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-482">If you notice that you've found Remote Winsock (RWS) traffic (it may appear as a [PSH, ACK] in Wireshark), remember that RWS connects can be seen shortly before relevant SYN - SYN/ACKs, as discussed earlier.</span></span>

<span data-ttu-id="6d7b9-483">À ce stade, vous pouvez enregistrer le numéro d’image, déposez le filtre, cliquez sur **tout le trafic** dans la fenêtre des conversations réseau dans Netmon pour examiner le syn le plus proche.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-483">At this point, you can record the frame number, drop the filter, click **All Traffic** in the Network Conversations window in Netmon to look at the nearest SYN.</span></span>

<span data-ttu-id="6d7b9-484">En outre, si vous n’avez pas reçu les informations d’adresse IP au moment du suivi, la recherche de votre URL dans le suivi (partie `sphybridExample-my.sharepoint.com`de, par exemple) vous donnera des adresses IP pour le filtrage.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-484">Importantly, if you didn't receive any of the IP address information at the time of the trace, finding your URL in the trace (part of `sphybridExample-my.sharepoint.com`, for example), will give you IP addresses to filter by.</span></span>

<span data-ttu-id="6d7b9-485">Localisez la connexion dans le suivi que vous souhaitez voir.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-485">Locate the connection in the trace that you're interested in seeing.</span></span> <span data-ttu-id="6d7b9-486">Pour ce faire, vous pouvez analyser le suivi, en le filtrant par adresse IP, ou en sélectionnant des ID de conversation spécifiques à l’aide de la fenêtre de conversation réseau dans Netmon.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-486">You may do this by either scanning the trace, by filtering by IP addresses, or by selecting specific Conversation IDs using the Network Conversations window in Netmon.</span></span> <span data-ttu-id="6d7b9-487">Une fois que vous avez trouvé le paquet SYN, développez TCP (dans NetMon) ou protocole de contrôle de transmission (dans Wireshark) dans le panneau de détails de trame.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-487">Once you've found the SYN packet, expand TCP (in Netmon), or Transmission Control Protocol (in Wireshark) in the Frame Details panel.</span></span> <span data-ttu-id="6d7b9-488">Développez options et MaxSegmentSize.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-488">Expand TCP Options and MaxSegmentSize.</span></span> <span data-ttu-id="6d7b9-489">Localisez le cadre SYN-ACK associé et développez options TCP et MaxSegmentSize.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-489">Locate the related SYN-ACK frame and Expand TCP Options and MaxSegmentSize.</span></span> <span data-ttu-id="6d7b9-490">La plus petite des deux valeurs correspond à la taille maximale de votre segment.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-490">The smaller of the two values will be your Maximum Segment Size.</span></span> <span data-ttu-id="6d7b9-491">Dans cette illustration, j’utilise la colonne intégrée dans Netmon appelée TCP Troubleshoot.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-491">In this picture, I make use of the built-in Column in Netmon called TCP Troubleshoot.</span></span>  

![Suivi réseau filtré dans Netmon à l’aide des colonnes intégrées.](media/e073df13-71f8-497a-83b4-bb9f70bd9833.PNG)

<span data-ttu-id="6d7b9-493">La colonne intégrée se trouve en haut du panneau Détails du **cadre** .</span><span class="sxs-lookup"><span data-stu-id="6d7b9-493">The built-in column is at the top of the **Frame Details** panel.</span></span> <span data-ttu-id="6d7b9-494">(Pour revenir à l’affichage normal, cliquez à nouveau sur **colonnes** , puis choisissez **fuseau horaire**.)</span><span class="sxs-lookup"><span data-stu-id="6d7b9-494">(To switch back to your normal view, click **Columns** again, and then choose **Time Zone**.)</span></span>

![Où trouver la liste déroulante des colonnes pour l’option Résolution des problèmes TCP (en haut du résumé de la trame).](media/64fd4baa-a872-4f07-b959-752d7d37fd62.PNG)

<span data-ttu-id="6d7b9-496">Voici un suivi filtré dans Wireshark.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-496">Here's a filtered trace in Wireshark.</span></span> <span data-ttu-id="6d7b9-497">Il existe un filtre spécifique à la valeur MSS ( `tcp.options.mss`).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-497">There is a filter specific to the MSS value ( `tcp.options.mss`).</span></span> <span data-ttu-id="6d7b9-498">Les trames d’une négociation SYN, SYN/ACK et ACK sont liées au bas de l’équivalent Wireshark aux détails des trames (de sorte que frame 47 ACK, des liens vers 46 SYN/ACK, des liens vers 43 SYN) pour faciliter cette tâche.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-498">The frames of a SYN, SYN/ACK, ACK handshake are linked at the bottom of the Wireshark equivalent to Frame Details (so frame 47 ACK, links to 46 SYN/ACK, links to 43 SYN) to make this kind of work easier.</span></span>

![Suivi filtré dans Wireshark par TCP. options. MSS pour max segment Size (MSS).](media/51e278db-801b-48bc-9b68-87cf92f03fd6.PNG)

<span data-ttu-id="6d7b9-500">Si vous devez vérifier l' **accusé de réception sélectif** (rubrique suivante de cette matrice), ne fermez pas votre trace!</span><span class="sxs-lookup"><span data-stu-id="6d7b9-500">If you need to check **Selective Acknowledgment** (next topic in this matrix), don't close your trace!</span></span>

### <a name="selective-acknowledgment"></a><span data-ttu-id="6d7b9-501">Accusé de réception sélectif</span><span class="sxs-lookup"><span data-stu-id="6d7b9-501">Selective Acknowledgment</span></span>

<span data-ttu-id="6d7b9-502">Trouvé dans le SYN-SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-502">Found in the SYN - SYN/ACK.</span></span> <span data-ttu-id="6d7b9-503">Doit être signalé comme autorisé dans les protocoles SYN et SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-503">Must be reported as Permitted in both SYN and SYN/ACK.</span></span> <span data-ttu-id="6d7b9-504">L’accusé de réception sélectif (SACK) permet une retransmission plus fluide des données lorsqu’un paquet ou des paquets sont manquants.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-504">Selective Acknowledgment (SACK) allows for smoother retransmission of data when a packet or packets go missing.</span></span> <span data-ttu-id="6d7b9-505">Les appareils peuvent désactiver cette fonctionnalité, ce qui peut entraîner des problèmes de performances.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-505">Devices can disable this feature, which can lead to performance problems.</span></span>

<span data-ttu-id="6d7b9-506">Si vous êtes protégé par un proxy, ou si vous utilisez un NAT, n’oubliez pas d’exécuter ce test depuis le client vers proxy/sortie/NAT, et de proxy/sortie/NAT vers Office 365 pour obtenir les meilleurs résultats!</span><span class="sxs-lookup"><span data-stu-id="6d7b9-506">If you're behind a proxy, or you are using a NAT, remember to run this test from client to proxy/egress/NAT, and from proxy/egress/NAT to Office 365 for best results!</span></span> <span data-ttu-id="6d7b9-507">Il s’agit de différentes sessions TCP.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-507">These are different TCP sessions.</span></span>

#### <a name="tools"></a><span data-ttu-id="6d7b9-508">Outils</span><span class="sxs-lookup"><span data-stu-id="6d7b9-508">Tools</span></span>

<span data-ttu-id="6d7b9-509">Moniteur</span><span class="sxs-lookup"><span data-stu-id="6d7b9-509">Netmon</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="6d7b9-510">Éléments à rechercher</span><span class="sxs-lookup"><span data-stu-id="6d7b9-510">What to look for</span></span>

<span data-ttu-id="6d7b9-511">L’accusé de réception sélectif (SACK) est un autre paramètre dans le protocole de transfert SYN-SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-511">Selective Acknowledgment (SACK) is another parameter in the SYN-SYN/ACK handshake.</span></span> <span data-ttu-id="6d7b9-512">Vous pouvez filtrer votre suivi pour SYN-SYN/ACK de nombreuses façons.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-512">You can filter your trace for SYN - SYN/ACK many ways.</span></span>

<span data-ttu-id="6d7b9-513">Localisez la connexion dans le suivi qui vous intéresse en analysant le suivi, en filtrant par adresse IP ou en cliquant sur un ID de conversation en utilisant la fenêtre conversations réseau dans Netmon.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-513">Locate the connection in the trace that you're interested in seeing either by scanning the trace, filtering by IP addresses, or by clicking a Conversation ID using the Network Conversations window in Netmon.</span></span> <span data-ttu-id="6d7b9-514">Une fois que vous avez trouvé le paquet SYN, développez TCP dans Netmon ou protocole de contrôle de transmission dans Wireshark dans la section Détails des cadres.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-514">Once you've found the SYN packet, expand TCP in Netmon, or Transmission Control Protocol in Wireshark in the Frame Details section.</span></span> <span data-ttu-id="6d7b9-515">Développez options TCP, puis SACK.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-515">Expand TCP Options and then SACK.</span></span> <span data-ttu-id="6d7b9-516">Localisez le cadre SYN-ACK associé et développez options TCP et son champ SACK.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-516">Locate the related SYN-ACK frame and Expand TCP Options and its SACK field.</span></span> <span data-ttu-id="6d7b9-517">La création d’un sac est autorisée dans les protocoles SYN et SYN/ACK.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-517">Make certain SACK is permitted in both SYN and SYN/ACK.</span></span> <span data-ttu-id="6d7b9-518">Voici les valeurs SACK telles qu’elles apparaissent dans Netmon et Wireshark.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-518">Here are SACK values as seen in both Netmon and Wireshark.</span></span>

![Accusé de réception sélectif (SACK) dans Netmon suite à TCP. Flags. syn = = 1.](media/216f556f-5031-4ed2-b066-a0d9b3251fa2.PNG)

![SACK comme dans Wireshark avec le filtre tcp.flags.syn == 1.](media/0a6e26e5-43dc-403b-adc9-3349a55f4e4b.PNG)

### <a name="dns-geolocation"></a><span data-ttu-id="6d7b9-521">Géolocalisation DNS</span><span class="sxs-lookup"><span data-stu-id="6d7b9-521">DNS Geolocation</span></span>

<span data-ttu-id="6d7b9-522">Où dans le monde d’Office 365 tente de résoudre vos effets d’appels DNS en votre vitesse de connexion.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-522">Where in the world Office 365 tries to resolve your DNS call effects your connection speed.</span></span>

<span data-ttu-id="6d7b9-523">Dans Outlook Online, une fois la première recherche DNS terminée, l’emplacement de ce DNS est utilisé pour se connecter à votre centre de centres le plus proche.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-523">In Outlook Online, after the first DNS lookup is completed, the location of that DNS will be used to connect to your nearest datacenter.</span></span> <span data-ttu-id="6d7b9-524">Vous serez connecté à un serveur CAS Outlook Online, qui utilisera le réseau fédérateur pour se connecter au centre de données où vos données sont stockées.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-524">You will be connected to an Outlook Online CAS server, which will use the backbone network to connect to the datacenter (dC) where your data is stored.</span></span> <span data-ttu-id="6d7b9-525">Cela est plus rapide.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-525">This is faster.</span></span>

<span data-ttu-id="6d7b9-526">Lors de l’accès à SharePoint Online, un utilisateur qui voyage à l’étranger est dirigé vers son centre de ligne de service actif, c’est-à-dire le contrôleur de service dont l’emplacement est basé sur la base d’origine de son locataire SPO (ainsi, un contrôleur de réseau aux États-Unis si l’utilisateur est basé sur les États-Unis).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-526">When accessing SharePoint Online, a user traveling abroad will be directed to their active datacenter -- that's the dC whose location is based on their SPO tenant's home-base (so, a dC in the USA if the user if USA-based).</span></span>

<span data-ttu-id="6d7b9-527">Lync Online dispose de nœuds actifs dans plusieurs contrôleurs de service à la fois.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-527">Lync online has active nodes in more than one dC at a time.</span></span> <span data-ttu-id="6d7b9-528">Lorsque des demandes sont envoyées pour des instances Lync Online, le service DNS de Microsoft détermine l’origine de la demande et renvoie des adresses IP à partir du contrôleur de domaine régional le plus proche où Lync Online est actif.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-528">When requests are sent for Lync online instances, Microsoft's DNS will determine where in the world the request came from, and return IP addresses from the nearest regional dC where Lync online is active.</span></span>

> [!TIP]
> <span data-ttu-id="6d7b9-529">Vous avez besoin d’en savoir plus sur la façon dont les clients se connectent à Office 365?</span><span class="sxs-lookup"><span data-stu-id="6d7b9-529">Need to know more about how clients connect to Office 365?</span></span> <span data-ttu-id="6d7b9-530">Jetez un œil à l’article de référence de [connectivité client](https://technet.microsoft.com/en-us/library/dn741250.aspx) (et ses graphiques utiles).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-530">Take a look at the [Client Connectivity](https://technet.microsoft.com/en-us/library/dn741250.aspx) reference article (and its helpful graphics).</span></span>

#### <a name="tools"></a><span data-ttu-id="6d7b9-531">Outils</span><span class="sxs-lookup"><span data-stu-id="6d7b9-531">Tools</span></span>

- <span data-ttu-id="6d7b9-532">Interroge</span><span class="sxs-lookup"><span data-stu-id="6d7b9-532">Ping</span></span>
- <span data-ttu-id="6d7b9-533">PsPing</span><span class="sxs-lookup"><span data-stu-id="6d7b9-533">PsPing</span></span>

#### <a name="what-to-look-for"></a><span data-ttu-id="6d7b9-534">Éléments à rechercher</span><span class="sxs-lookup"><span data-stu-id="6d7b9-534">What to look for</span></span>

<span data-ttu-id="6d7b9-535">Les demandes de résolution de nom provenant des serveurs DNS du client sur les serveurs DNS de Microsoft doivent, dans la plupart des cas, entraîner le renvoi par Microsoft DNS de l’adresse IP d’un centre de donnees régional.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-535">Requests for name resolution from the client's DNS servers to Microsoft's DNS servers should in most cases result in Microsoft DNS returning the IP address of a regional datacenter (dC).</span></span> <span data-ttu-id="6d7b9-536">Qu’est-ce que cela signifie pour vous?</span><span class="sxs-lookup"><span data-stu-id="6d7b9-536">What does this mean for you?</span></span> <span data-ttu-id="6d7b9-537">Si votre siège se trouve à Bangalore, en Inde, mais que vous êtes en déplacement aux États-Unis, lorsque votre navigateur envoie une demande pour Outlook Online, les serveurs DNS de Microsoft doivent transmettre vos adresses IP aux centres de centres aux États-Unis, un centre de donnees régional.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-537">If your headquarters are in Bangalore, India, but you are traveling in the United States, when your browser makes a request for Outlook Online, Microsoft's DNS servers should hand you IP addresses to datacenters in the United States -- a regional datacenter.</span></span> <span data-ttu-id="6d7b9-538">Si des messages sont nécessaires à partir d’Outlook, ces données transitent sur le réseau principal rapide de Microsoft entre les centres de données.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-538">If mail is needed from Outlook, that data will travel across Microsoft's quick backbone network between the datacenters.</span></span>

<span data-ttu-id="6d7b9-539">Le DNS est plus rapide lorsque la résolution de noms est utilisée aussi près que possible de l’emplacement de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-539">DNS works fastest when name resolution is done as close to the user location as possible.</span></span> <span data-ttu-id="6d7b9-540">Si vous êtes en Europe, vous souhaitez accéder à un DNS Microsoft en Europe et (idéalement) traiter un centre de donne en Europe.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-540">If you're in Europe, you want to go to a Microsoft DNS in Europe, and (ideally) deal with a datacenter in Europe.</span></span> <span data-ttu-id="6d7b9-541">Les performances d’un client en Europe accédant à DNS et à un centre de centre d’Amérique seront plus lentes.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-541">Performance from a client in Europe going to DNS and a datacenter in America will be slower.</span></span>

<span data-ttu-id="6d7b9-542">Exécutez l’outil ping sur outlook.office365.com pour déterminer où le monde de votre demande DNS est acheminé.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-542">Run the Ping tool against outlook.office365.com to determine where in the world your DNS request is being routed.</span></span> <span data-ttu-id="6d7b9-543">Si vous êtes en Europe, vous devriez voir une réponse d’un peu comme outlook-emeawest.office365.com.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-543">If you are in Europe, you should see a reply from something like outlook-emeawest.office365.com.</span></span> <span data-ttu-id="6d7b9-544">En Amérique, attendez-vous à outlook-namnorthwest.office365.com.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-544">In the Americas, expect something like outlook-namnorthwest.office365.com.</span></span>

<span data-ttu-id="6d7b9-545">Ouvrez l’invite de commandes sur l’ordinateur client (via \> Start \> Run cmd ou Windows \> Key type cmd).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-545">Open the command prompt on the client computer (via Start \> Run \> cmd or Windows key \> type cmd).</span></span> <span data-ttu-id="6d7b9-546">Tapez ping outlook.office365.com, puis appuyez sur entrée.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-546">Type ping outlook.office365.com and press ENTER.</span></span> <span data-ttu-id="6d7b9-547">N’oubliez pas d’indiquer-4 Si vous voulez demander la commande ping via IPv4.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-547">Remember, to specify -4 if you want to specify to ping via IPv4.</span></span> <span data-ttu-id="6d7b9-548">Vous pouvez ne pas obtenir de réponse des paquets ICMP, mais vous devez voir le nom du DNS vers lequel la demande a été routée.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-548">You may fail to get a reply from the ICMP packets, but you should see the name of the DNS to which the request was routed.</span></span> <span data-ttu-id="6d7b9-549">Si vous souhaitez afficher les numéros de latence pour cette connexion, essayez PsPing à l’adresse IP du serveur renvoyé par ping.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-549">If you want to see the latency numbers for this connection try PsPing to the IP address of the server that is returned by ping.</span></span>  

![Commande ping d’outlook.office365.com affichant la résolution dans outlook-namnorthwest.](media/06c944d5-6159-43ec-aa31-757770695e8b.PNG)

![PSPing à l’adresse IP renvoyée par la commande ping vers outlook.office365.com avec une latence moyenne de 28 millisecondes.](media/f2b25a75-1a87-4479-b8a7-fa4375683507.PNG)

### <a name="office-365-application-troubleshooting"></a><span data-ttu-id="6d7b9-552">Résolution des problèmes liés aux applications Office 365</span><span class="sxs-lookup"><span data-stu-id="6d7b9-552">Office 365 Application Troubleshooting</span></span>

#### <a name="tools"></a><span data-ttu-id="6d7b9-553">Outils</span><span class="sxs-lookup"><span data-stu-id="6d7b9-553">Tools</span></span>

- <span data-ttu-id="6d7b9-554">Moniteur</span><span class="sxs-lookup"><span data-stu-id="6d7b9-554">Netmon</span></span>
- <span data-ttu-id="6d7b9-555">HTTPWatch</span><span class="sxs-lookup"><span data-stu-id="6d7b9-555">HTTPWatch</span></span>
- <span data-ttu-id="6d7b9-556">Console F12 dans le navigateur</span><span class="sxs-lookup"><span data-stu-id="6d7b9-556">F12 Console in the browser</span></span>

<span data-ttu-id="6d7b9-557">Nous n’aborderons pas les outils utilisés dans la résolution des problèmes spécifiques aux applications dans cet article propre au réseau.</span><span class="sxs-lookup"><span data-stu-id="6d7b9-557">We don't cover tools used in application-specific troubleshooting in this network-specific article.</span></span> <span data-ttu-id="6d7b9-558">Toutefois, vous trouverez les ressources que vous *pouvez* utiliser [sur cette page](https://support.office.com/en-us/article/Network-planning-and-performance-tuning-for-Office-365-e5f1228c-da3c-4654-bf16-d163daee8848).</span><span class="sxs-lookup"><span data-stu-id="6d7b9-558">But you'll find resources you  *can*  use [on this page](https://support.office.com/en-us/article/Network-planning-and-performance-tuning-for-Office-365-e5f1228c-da3c-4654-bf16-d163daee8848).</span></span>

## <a name="related-topics"></a><span data-ttu-id="6d7b9-559">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="6d7b9-559">Related Topics</span></span>

[<span data-ttu-id="6d7b9-560">Gestion des points de terminaison Office 365</span><span class="sxs-lookup"><span data-stu-id="6d7b9-560">Managing Office 365 endpoints</span></span>](https://support.office.com/article/99cab9d4-ef59-4207-9f2b-3728eb46bf9a)
  
[<span data-ttu-id="6d7b9-561">Points de terminaison Office 365 - FAQ</span><span class="sxs-lookup"><span data-stu-id="6d7b9-561">Office 365 endpoints FAQ</span></span>](https://support.office.com/article/d4088321-1c89-4b96-9c99-54c75cae2e6d)
