---
title: Préparer l’attribution des utilisateurs via la synchronisation d’annuaires dans Office 365
ms.author: josephd
author: JoeDavies-MSFT
manager: laurawi
audience: Admin
ms.topic: article
f1_keywords:
- O365p_AddUsersWithDirSync
- O365M_AddUsersWithDirSync
- O365E_HRCSetupAADConnectAboutLM617031
- O365E_AddUsersWithDirSync
ms.service: o365-administration
localization_priority: Normal
ms.custom: Adm_O365
ms.collection:
- Ent_O365
- M365-identity-device-management
search.appverid:
- MET150
- MOP150
- MOE150
- MBS150
ms.assetid: 01920974-9e6f-4331-a370-13aea4e82b3e
description: Décrit comment préparer la mise en service des utilisateurs vers Office 365 à l’aide de la synchronisation d’annuaires et des avantages à long terme de cette méthode.
ms.openlocfilehash: 0b2fe552911797337541bd25f0efcb81eab303bf
ms.sourcegitcommit: 08e1e1c09f64926394043291a77856620d6f72b5
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/15/2019
ms.locfileid: "34071030"
---
# <a name="prepare-to-provision-users-through-directory-synchronization-to-office-365"></a><span data-ttu-id="42c2e-103">Préparer l’attribution des utilisateurs via la synchronisation d’annuaires dans Office 365</span><span class="sxs-lookup"><span data-stu-id="42c2e-103">Prepare to provision users through directory synchronization to Office 365</span></span>

<span data-ttu-id="42c2e-104">La mise en service des utilisateurs à l’aide de la synchronisation d’annuaires nécessite une planification et une préparation supérieures à la simple gestion de votre compte professionnel ou scolaire directement dans Office 365.</span><span class="sxs-lookup"><span data-stu-id="42c2e-104">Provisioning users with directory synchronization requires more planning and preparation than simply managing your work or school account directly in Office 365.</span></span> <span data-ttu-id="42c2e-105">Les tâches de planification et de préparation supplémentaires sont nécessaires pour s’assurer que votre annuaire Active Directory local se synchronise correctement avec Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="42c2e-105">The additional planning and preparation tasks are required to ensure that your on-premises Active Directory synchronizes properly to Azure Active Directory.</span></span> <span data-ttu-id="42c2e-106">Les avantages de votre organisation sont les suivants:</span><span class="sxs-lookup"><span data-stu-id="42c2e-106">The added benefits to your organization include:</span></span>
  
- <span data-ttu-id="42c2e-107">Réduction des programmes d’administration au sein de votre organisation</span><span class="sxs-lookup"><span data-stu-id="42c2e-107">Reducing the administrative programs in your organization</span></span>
- <span data-ttu-id="42c2e-108">Activer le scénario d’authentification unique (facultatif)</span><span class="sxs-lookup"><span data-stu-id="42c2e-108">Optionally enabling single sign-on scenario</span></span>
- <span data-ttu-id="42c2e-109">Automatisation des modifications de compte dans Office 365</span><span class="sxs-lookup"><span data-stu-id="42c2e-109">Automating account changes in Office 365</span></span>
    
<span data-ttu-id="42c2e-110">Pour plus d’informations sur les avantages liés à l’utilisation de la synchronisation d’annuaires, voir feuille de [route de synchronisation]( https://go.microsoft.com/fwlink/p/?LinkId=525398) d’annuaires et présentation de l' [identité Office 365 et d’Azure Active Directory](about-office-365-identity.md).</span><span class="sxs-lookup"><span data-stu-id="42c2e-110">For more information about the advantages of using directory synchronization, see [Directory synchronization roadmap]( https://go.microsoft.com/fwlink/p/?LinkId=525398) and [Understanding Office 365 Identity and Azure Active Directory](about-office-365-identity.md).</span></span>
  
<span data-ttu-id="42c2e-111">Pour déterminer le scénario le mieux adapté à votre organisation, consultez la [comparaison des outils d’intégration d’annuaire](https://go.microsoft.com/fwlink/p/?LinkId=525320).</span><span class="sxs-lookup"><span data-stu-id="42c2e-111">To determine which scenario is the best for your organization, review the [directory integration tools comparison](https://go.microsoft.com/fwlink/p/?LinkId=525320).</span></span>
  
## <a name="directory-cleanup-tasks"></a><span data-ttu-id="42c2e-112">Tâches de nettoyage d’annuaire</span><span class="sxs-lookup"><span data-stu-id="42c2e-112">Directory cleanup tasks</span></span>

<span data-ttu-id="42c2e-113">Avant de commencer la synchronisation de votre annuaire, vous devez nettoyer votre répertoire.</span><span class="sxs-lookup"><span data-stu-id="42c2e-113">Before you begin synchronizing your directory, you need to clean up your directory.</span></span>
  
<span data-ttu-id="42c2e-114">Vérifiez également les [attributs synchronisés avec Azure Active Directory par Azure ad Connect](https://docs.microsoft.com/azure/active-directory/hybrid/reference-connect-sync-attributes-synchronized).</span><span class="sxs-lookup"><span data-stu-id="42c2e-114">Review also the [attributes synchronized to Azure Active Directory by Azure AD Connect](https://docs.microsoft.com/azure/active-directory/hybrid/reference-connect-sync-attributes-synchronized).</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="42c2e-115">Si vous n’effectuez pas de nettoyage d’annuaire avant de procéder à la synchronisation, le processus de déploiement peut avoir un impact significatif.</span><span class="sxs-lookup"><span data-stu-id="42c2e-115">If you don't perform directory cleanup before you synchronize, there can be a significant negative effect on the deployment process.</span></span> <span data-ttu-id="42c2e-116">Cela peut prendre des jours, voire des semaines, pour parcourir le cycle de synchronisation d’annuaires, l’identification des erreurs et la resynchronisation.</span><span class="sxs-lookup"><span data-stu-id="42c2e-116">It might take days, or even weeks, to go through the cycle of directory synchronization, identifying errors, and re-synchronization.</span></span> 
  
<span data-ttu-id="42c2e-117">Dans votre annuaire local, effectuez les tâches de nettoyage suivantes:</span><span class="sxs-lookup"><span data-stu-id="42c2e-117">In your on-premises directory, complete the following clean-up tasks:</span></span>
  
1. <span data-ttu-id="42c2e-118">Assurez-vous que chaque utilisateur qui sera affecté aux offres de service Office 365 dispose d’une adresse de messagerie unique et valide dans l’attribut **proxyAddresses** .</span><span class="sxs-lookup"><span data-stu-id="42c2e-118">Ensure that each user who will be assigned Office 365 service offerings has a valid and unique email address in the **proxyAddresses** attribute.</span></span> 
    
2. <span data-ttu-id="42c2e-119">Supprimez toutes les valeurs en double dans l’attribut **proxyAddresses** .</span><span class="sxs-lookup"><span data-stu-id="42c2e-119">Remove any duplicate values in the **proxyAddresses** attribute.</span></span> 
    
3.  <span data-ttu-id="42c2e-120">Si possible, assurez-vous que chaque utilisateur qui sera affecté aux offres de service Office 365 a une valeur valide et unique pour l’attribut **userPrincipalName** dans l’objet **utilisateur** de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="42c2e-120">If possible, ensure that each user who will be assigned Office 365 service offerings has a valid and unique value for the **userPrincipalName** attribute in the user's **user** object.</span></span> <span data-ttu-id="42c2e-121">Pour optimiser l’expérience de synchronisation, vérifiez que l’UPN Active Directory local correspond à l’UPN Cloud.</span><span class="sxs-lookup"><span data-stu-id="42c2e-121">For best synchronization experience, ensure that the on-premises Active Directory UPN matches the cloud UPN.</span></span> <span data-ttu-id="42c2e-122">Si un utilisateur n’a pas de valeur pour l’attribut **userPrincipalName** , l’objet **User** doit contenir une valeur valide et unique pour l’attribut **sAMAccountName** .</span><span class="sxs-lookup"><span data-stu-id="42c2e-122">If a user does not have a value for the **userPrincipalName** attribute, then the **user** object must contain a valid and unique value for the **sAMAccountName** attribute.</span></span> <span data-ttu-id="42c2e-123">Supprimez toutes les valeurs en double dans l’attribut **userPrincipalName** .</span><span class="sxs-lookup"><span data-stu-id="42c2e-123">Remove any duplicate values in the **userPrincipalName** attribute.</span></span> 
    
4. <span data-ttu-id="42c2e-124">Pour une utilisation optimale de la liste d’adresses globale (LAG), assurez-vous que les informations contenues dans les attributs suivants sont correctes:</span><span class="sxs-lookup"><span data-stu-id="42c2e-124">For optimal use of the global address list (GAL), be sure the information in the following attributes is correct:</span></span>
    
  - <span data-ttu-id="42c2e-125">givenName</span><span class="sxs-lookup"><span data-stu-id="42c2e-125">givenName</span></span>
  - <span data-ttu-id="42c2e-126">surname</span><span class="sxs-lookup"><span data-stu-id="42c2e-126">surname</span></span>
  - <span data-ttu-id="42c2e-127">displayName</span><span class="sxs-lookup"><span data-stu-id="42c2e-127">displayName</span></span>
  - <span data-ttu-id="42c2e-128">Fonction</span><span class="sxs-lookup"><span data-stu-id="42c2e-128">Job Title</span></span>
  - <span data-ttu-id="42c2e-129">Service</span><span class="sxs-lookup"><span data-stu-id="42c2e-129">Department</span></span>
  - <span data-ttu-id="42c2e-130">Bureau</span><span class="sxs-lookup"><span data-stu-id="42c2e-130">Office</span></span>
  - <span data-ttu-id="42c2e-131">Téléphone (bureau)</span><span class="sxs-lookup"><span data-stu-id="42c2e-131">Office Phone</span></span>
  - <span data-ttu-id="42c2e-132">Téléphone mobile</span><span class="sxs-lookup"><span data-stu-id="42c2e-132">Mobile Phone</span></span>
  - <span data-ttu-id="42c2e-133">Numéro de télécopie</span><span class="sxs-lookup"><span data-stu-id="42c2e-133">Fax Number</span></span>
  - <span data-ttu-id="42c2e-134">Rue</span><span class="sxs-lookup"><span data-stu-id="42c2e-134">Street Address</span></span>
  - <span data-ttu-id="42c2e-135">Ville</span><span class="sxs-lookup"><span data-stu-id="42c2e-135">City</span></span>
  - <span data-ttu-id="42c2e-136">Département ou région</span><span class="sxs-lookup"><span data-stu-id="42c2e-136">State or Province</span></span>
  - <span data-ttu-id="42c2e-137">Code postal</span><span class="sxs-lookup"><span data-stu-id="42c2e-137">Zip or Postal Code</span></span>
  - <span data-ttu-id="42c2e-138">Pays ou région</span><span class="sxs-lookup"><span data-stu-id="42c2e-138">Country or Region</span></span>
    
## <a name="directory-object-and-attribute-preparation"></a><span data-ttu-id="42c2e-139">Préparation de l’objet d’annuaire et de l’attribut</span><span class="sxs-lookup"><span data-stu-id="42c2e-139">Directory object and attribute preparation</span></span>

<span data-ttu-id="42c2e-140">La réussite de la synchronisation d’annuaires entre votre répertoire local et Office 365 nécessite que vos attributs d’annuaire locaux soient correctement préparés.</span><span class="sxs-lookup"><span data-stu-id="42c2e-140">Successful directory synchronization between your on-premises directory and Office 365 requires that your on-premises directory attributes are properly prepared.</span></span> <span data-ttu-id="42c2e-141">Par exemple, vous devez vous assurer que des caractères spécifiques ne sont pas utilisés dans certains attributs synchronisés avec l’environnement Office 365.</span><span class="sxs-lookup"><span data-stu-id="42c2e-141">For example, you need to ensure that specific characters aren't used in certain attributes that are synchronized with the Office 365 environment.</span></span> <span data-ttu-id="42c2e-142">Les caractères inattendus ne provoquent pas l’échec de la synchronisation d’annuaires, mais peuvent renvoyer un avertissement.</span><span class="sxs-lookup"><span data-stu-id="42c2e-142">Unexpected characters do not cause directory synchronization to fail but might return a warning.</span></span> <span data-ttu-id="42c2e-143">Les caractères non valides entraînent l’échec de la synchronisation d’annuaires.</span><span class="sxs-lookup"><span data-stu-id="42c2e-143">Invalid characters will cause directory synchronization to fail.</span></span>
  
<span data-ttu-id="42c2e-144">La synchronisation d’annuaires échoue également si certains de vos utilisateurs Active Directory disposent d’un ou plusieurs attributs en double.</span><span class="sxs-lookup"><span data-stu-id="42c2e-144">Directory synchronization will also fail if some of your Active Directory users have one or more duplicate attributes.</span></span> <span data-ttu-id="42c2e-145">Chaque utilisateur doit avoir des attributs uniques.</span><span class="sxs-lookup"><span data-stu-id="42c2e-145">Each user must have unique attributes.</span></span>
  
<span data-ttu-id="42c2e-146">Les attributs que vous devez préparer sont répertoriés ici:</span><span class="sxs-lookup"><span data-stu-id="42c2e-146">The attributes that you need to prepare are listed here:</span></span>
  
 <span data-ttu-id="42c2e-147">**Remarque:** Vous pouvez également utiliser l' [outil IdFix](install-and-run-idfix.md) pour simplifier ce processus.</span><span class="sxs-lookup"><span data-stu-id="42c2e-147">**NOTE:** You can also use the [IdFix tool](install-and-run-idfix.md) to make this process a lot easier.</span></span> 
  
- <span data-ttu-id="42c2e-148">**displayName**</span><span class="sxs-lookup"><span data-stu-id="42c2e-148">**displayName**</span></span>
    
  - <span data-ttu-id="42c2e-149">Si l’attribut existe dans l’objet utilisateur, il sera synchronisé avec Office 365.</span><span class="sxs-lookup"><span data-stu-id="42c2e-149">If the attribute exists in the user object, it will be synchronized with Office 365.</span></span>
  - <span data-ttu-id="42c2e-150">Si cet attribut existe dans l’objet User, il doit y avoir une valeur pour lui.</span><span class="sxs-lookup"><span data-stu-id="42c2e-150">If this attribute exists in the user object, there must be a value for it.</span></span> <span data-ttu-id="42c2e-151">Autrement dit, l’attribut ne doit pas être vide.</span><span class="sxs-lookup"><span data-stu-id="42c2e-151">That is, the attribute must not be blank.</span></span>
  - <span data-ttu-id="42c2e-152">Nombre maximal de caractères : 256</span><span class="sxs-lookup"><span data-stu-id="42c2e-152">Maximum number of characters: 256</span></span>
    
- <span data-ttu-id="42c2e-153">**givenName**</span><span class="sxs-lookup"><span data-stu-id="42c2e-153">**givenName**</span></span>
    
  - <span data-ttu-id="42c2e-154">Si l’attribut existe dans l’objet utilisateur, il sera synchronisé avec Office 365, mais Office 365 ne l’exige pas ou ne l’utilise pas.</span><span class="sxs-lookup"><span data-stu-id="42c2e-154">If the attribute exists in the user object, it will be synchronized with Office 365, but Office 365 does not require or use it.</span></span>
  - <span data-ttu-id="42c2e-155">Nombre maximal de caractères : 64</span><span class="sxs-lookup"><span data-stu-id="42c2e-155">Maximum number of characters: 64</span></span>
    
- <span data-ttu-id="42c2e-156">**e-mails**</span><span class="sxs-lookup"><span data-stu-id="42c2e-156">**mail**</span></span>
    
  - <span data-ttu-id="42c2e-157">La valeur de l’attribut doit être unique dans l’annuaire.</span><span class="sxs-lookup"><span data-stu-id="42c2e-157">The attribute value must be unique within the directory.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="42c2e-158">S’il existe des valeurs en double, le premier utilisateur avec la valeur est synchronisé.</span><span class="sxs-lookup"><span data-stu-id="42c2e-158">If there are duplicate values, the first user with the value is synchronized.</span></span> <span data-ttu-id="42c2e-159">Les utilisateurs suivants n’apparaîtront pas dans Office 365.</span><span class="sxs-lookup"><span data-stu-id="42c2e-159">Subsequent users will not appear in Office 365.</span></span> <span data-ttu-id="42c2e-160">Vous devez modifier la valeur dans Office 365 ou modifier les deux valeurs dans l’annuaire local afin que les deux utilisateurs apparaissent dans Office 365.</span><span class="sxs-lookup"><span data-stu-id="42c2e-160">You must modify either the value in Office 365, or modify both of the values in the on-premises directory in order for both users to appear in Office 365.</span></span> 
  
- <span data-ttu-id="42c2e-161">**mailnickname** (Alias Exchange)</span><span class="sxs-lookup"><span data-stu-id="42c2e-161">**mailNickname** (Exchange alias)</span></span> 
    
  - <span data-ttu-id="42c2e-162">La valeur de l’attribut ne peut pas commencer par un point (.).</span><span class="sxs-lookup"><span data-stu-id="42c2e-162">The attribute value cannot begin with a period (.).</span></span>
  - <span data-ttu-id="42c2e-163">La valeur de l’attribut doit être unique dans l’annuaire.</span><span class="sxs-lookup"><span data-stu-id="42c2e-163">The attribute value must be unique within the directory.</span></span>
    
- <span data-ttu-id="42c2e-164">**proxyAddresses**</span><span class="sxs-lookup"><span data-stu-id="42c2e-164">**proxyAddresses**</span></span>
    
  - <span data-ttu-id="42c2e-165">Attribut à valeurs multiples</span><span class="sxs-lookup"><span data-stu-id="42c2e-165">Multiple-value attribute</span></span>
  - <span data-ttu-id="42c2e-166">Nombre maximal de caractères par valeur: 256</span><span class="sxs-lookup"><span data-stu-id="42c2e-166">Maximum number of characters per value: 256</span></span>
  - <span data-ttu-id="42c2e-167">La valeur de l’attribut ne doit pas contenir d’espace.</span><span class="sxs-lookup"><span data-stu-id="42c2e-167">The attribute value must not contain a space.</span></span>
  - <span data-ttu-id="42c2e-168">La valeur de l’attribut doit être unique dans l’annuaire.</span><span class="sxs-lookup"><span data-stu-id="42c2e-168">The attribute value must be unique within the directory.</span></span>
  - <span data-ttu-id="42c2e-169">Caractères non valides: \< \> (); , [ ] "</span><span class="sxs-lookup"><span data-stu-id="42c2e-169">Invalid characters: \< \> ( ) ; , [ ] "</span></span>
    
    <span data-ttu-id="42c2e-170">Notez que les caractères non valides s’appliquent aux caractères qui suivent le délimiteur de type et à «:», ce qui signifie que SMTP:User@contso.com est autorisé, mais SMTP:user:M@contoso.com ne l’est pas.</span><span class="sxs-lookup"><span data-stu-id="42c2e-170">Note that the invalid characters apply to the characters following the type delimiter and ":", such that SMTP:User@contso.com is allowed, but SMTP:user:M@contoso.com is not.</span></span>
    
    > [!IMPORTANT]
    > <span data-ttu-id="42c2e-171">Toutes les adresses SMTP (simple mail transport Protocol) doivent respecter les normes de messagerie électronique.</span><span class="sxs-lookup"><span data-stu-id="42c2e-171">All Simple Mail Transport Protocol (SMTP) addresses should comply with email messaging standards.</span></span> <span data-ttu-id="42c2e-172">S’il existe des adresses en double ou indésirables, consultez la rubrique d’aide [suppression des adresses de proxy en double et indésirables dans Exchange](https://go.microsoft.com/fwlink/?LinkId=293860).</span><span class="sxs-lookup"><span data-stu-id="42c2e-172">If duplicate or unwanted addresses exist, see the Help topic [Removing duplicate and unwanted proxy addresses in Exchange](https://go.microsoft.com/fwlink/?LinkId=293860).</span></span> 
  
- <span data-ttu-id="42c2e-173">**sAMAccountName**</span><span class="sxs-lookup"><span data-stu-id="42c2e-173">**sAMAccountName**</span></span>
    
  - <span data-ttu-id="42c2e-174">Nombre maximal de caractère : 20</span><span class="sxs-lookup"><span data-stu-id="42c2e-174">Maximum number of characters: 20</span></span>
  - <span data-ttu-id="42c2e-175">La valeur de l’attribut doit être unique dans l’annuaire.</span><span class="sxs-lookup"><span data-stu-id="42c2e-175">The attribute value must be unique within the directory.</span></span>
  - <span data-ttu-id="42c2e-176">Caractères non valides: [\ "|, \< \> /: + =;?</span><span class="sxs-lookup"><span data-stu-id="42c2e-176">Invalid characters: [ \ " | , / : \< \> + = ; ?</span></span> <span data-ttu-id="42c2e-177">\* ]</span><span class="sxs-lookup"><span data-stu-id="42c2e-177"></span></span>
  - <span data-ttu-id="42c2e-178">Si un utilisateur a un attribut **sAMAccountName** non valide mais qu’il dispose d’un attribut **userPrincipalName** valide, le compte d’utilisateur est créé dans Office 365.</span><span class="sxs-lookup"><span data-stu-id="42c2e-178">If a user has an invalid **sAMAccountName** attribute but has a valid **userPrincipalName** attribute, the user account is created in Office 365.</span></span> 
  - <span data-ttu-id="42c2e-179">Si **sAMAccountName** et **userPrincipalName** sont tous deux incorrects, l’attribut **userPrincipalName** Active Directory local doit être mis à jour.</span><span class="sxs-lookup"><span data-stu-id="42c2e-179">If both **sAMAccountName** and **userPrincipalName** are invalid, the on-premises Active Directory **userPrincipalName** attribute must be updated.</span></span> 
    
- <span data-ttu-id="42c2e-180">**sn** Surname</span><span class="sxs-lookup"><span data-stu-id="42c2e-180">**sn** (surname)</span></span> 
    
  - <span data-ttu-id="42c2e-181">Si l’attribut existe dans l’objet utilisateur, il sera synchronisé avec Office 365, mais Office 365 ne l’exige pas ou ne l’utilise pas.</span><span class="sxs-lookup"><span data-stu-id="42c2e-181">If the attribute exists in the user object, it will be synchronized with Office 365, but Office 365 does not require or use it.</span></span>
    
- <span data-ttu-id="42c2e-182">**targetAddress**</span><span class="sxs-lookup"><span data-stu-id="42c2e-182">**targetAddress**</span></span>
    
    <span data-ttu-id="42c2e-183">Il est nécessaire que l’attribut **TargetAddress** (par exemple, SMTP:Tom@contoso.com) qui est rempli pour l’utilisateur doit apparaître dans la lag Office 365.</span><span class="sxs-lookup"><span data-stu-id="42c2e-183">It's required that the **targetAddress** attribute (for example, SMTP:tom@contoso.com) that's populated for the user must appear in the Office 365 GAL.</span></span> <span data-ttu-id="42c2e-184">Dans les scénarios de migration de messagerie tiers, cela nécessite l’extension de schéma Office 365 pour l’annuaire local.</span><span class="sxs-lookup"><span data-stu-id="42c2e-184">In third-party messaging migration scenarios, this would require the Office 365 schema extension for the on-premises directory.</span></span> <span data-ttu-id="42c2e-185">L’extension de schéma Office 365 ajoute également d’autres attributs utiles pour gérer les objets Office 365 qui sont renseignés à l’aide d’un outil de synchronisation d’annuaires à partir de l’annuaire local.</span><span class="sxs-lookup"><span data-stu-id="42c2e-185">The Office 365 schema extension would also add other useful attributes to manage Office 365 objects that are populated by using a directory synchronization tool from on-premises directory.</span></span> <span data-ttu-id="42c2e-186">Par exemple, l’attribut **msExchHideFromAddressLists** pour gérer les boîtes aux lettres masquées ou les groupes de distribution est ajouté.</span><span class="sxs-lookup"><span data-stu-id="42c2e-186">For example, the **msExchHideFromAddressLists** attribute to manage hidden mailboxes or distribution groups would be added.</span></span> 
   
  - <span data-ttu-id="42c2e-187">Nombre maximal de caractères : 256</span><span class="sxs-lookup"><span data-stu-id="42c2e-187">Maximum number of characters: 256</span></span>
  - <span data-ttu-id="42c2e-188">La valeur de l’attribut ne doit pas contenir d’espace.</span><span class="sxs-lookup"><span data-stu-id="42c2e-188">The attribute value must not contain a space.</span></span>
  - <span data-ttu-id="42c2e-189">La valeur de l’attribut doit être unique dans l’annuaire.</span><span class="sxs-lookup"><span data-stu-id="42c2e-189">The attribute value must be unique within the directory.</span></span>
  - <span data-ttu-id="42c2e-190">Caractères non valides \< \> : \ (); , [ ] "</span><span class="sxs-lookup"><span data-stu-id="42c2e-190">Invalid characters: \ \< \> ( ) ; , [ ] "</span></span>
  - <span data-ttu-id="42c2e-191">Toutes les adresses SMTP (simple mail transport Protocol) doivent respecter les normes de messagerie électronique.</span><span class="sxs-lookup"><span data-stu-id="42c2e-191">All Simple Mail Transport Protocol (SMTP) addresses should comply with email messaging standards.</span></span>
    
- <span data-ttu-id="42c2e-192">**userPrincipalName**</span><span class="sxs-lookup"><span data-stu-id="42c2e-192">**userPrincipalName**</span></span>
    
  - <span data-ttu-id="42c2e-193">L’attribut **userPrincipalName** doit être au format de connexion de style Internet où le nom d’utilisateur est suivi par le signe arobase (@) et un nom de domaine: par exemple, user@contoso.com.</span><span class="sxs-lookup"><span data-stu-id="42c2e-193">The **userPrincipalName** attribute must be in the Internet-style sign-in format where the user name is followed by the at sign (@) and a domain name: for example, user@contoso.com.</span></span> <span data-ttu-id="42c2e-194">Toutes les adresses SMTP (simple mail transport Protocol) doivent respecter les normes de messagerie électronique.</span><span class="sxs-lookup"><span data-stu-id="42c2e-194">All Simple Mail Transport Protocol (SMTP) addresses should comply with email messaging standards.</span></span>
  - <span data-ttu-id="42c2e-195">Le nombre maximal de caractères pour l’attribut **userPrincipalName** est 113.</span><span class="sxs-lookup"><span data-stu-id="42c2e-195">The maximum number of characters for the **userPrincipalName** attribute is 113.</span></span> <span data-ttu-id="42c2e-196">Un nombre de caractères spécifique est autorisé avant et après le signe @, comme suit:</span><span class="sxs-lookup"><span data-stu-id="42c2e-196">A specific number of characters are permitted before and after the at sign (@), as follows:</span></span> 
  - <span data-ttu-id="42c2e-197">Nombre maximum de caractères pour le nom d’utilisateur devant le caractère arrobase (@) : 64</span><span class="sxs-lookup"><span data-stu-id="42c2e-197">Maximum number of characters for the user name that is in front of the at sign (@): 64</span></span>
  - <span data-ttu-id="42c2e-198">Nombre maximal de caractères pour le nom de domaine qui suit le signe arobase (@): 48</span><span class="sxs-lookup"><span data-stu-id="42c2e-198">Maximum number of characters for the domain name following the at sign (@): 48</span></span>
  - <span data-ttu-id="42c2e-199">Caractères non valides: &amp; \* \% +/=?</span><span class="sxs-lookup"><span data-stu-id="42c2e-199">Invalid characters: \ % &amp; \* + / = ?</span></span> <span data-ttu-id="42c2e-200">{ } | \< \> ( ) ; : , [ ] "</span><span class="sxs-lookup"><span data-stu-id="42c2e-200"></span></span>
  - <span data-ttu-id="42c2e-201">Un tréma est également un caractère non valide.</span><span class="sxs-lookup"><span data-stu-id="42c2e-201">An umlaut is also an invalid character.</span></span>
  - <span data-ttu-id="42c2e-202">Le caractère @ est requis dans chaque valeur **userPrincipalName** .</span><span class="sxs-lookup"><span data-stu-id="42c2e-202">The @ character is required in each **userPrincipalName** value.</span></span> 
  - <span data-ttu-id="42c2e-203">Le caractère @ ne peut pas être le premier caractère dans chaque valeur **userPrincipalName**.</span><span class="sxs-lookup"><span data-stu-id="42c2e-203">The @ character cannot be the first character in each **userPrincipalName** value.</span></span> 
  - <span data-ttu-id="42c2e-204">Le nom d’utilisateur ne peut pas se terminer par un point (.)&amp;, une esperluette (), un espace ou un signe arobase (@).</span><span class="sxs-lookup"><span data-stu-id="42c2e-204">The user name cannot end with a period (.), an ampersand (&amp;), a space, or an at sign (@).</span></span>
  - <span data-ttu-id="42c2e-205">Le nom d’utilisateur ne peut pas contenir d’espaces.</span><span class="sxs-lookup"><span data-stu-id="42c2e-205">The user name cannot contain any spaces.</span></span>
  - <span data-ttu-id="42c2e-206">Les domaines routables doivent être utilisés; par exemple, les domaines locaux ou internes ne peuvent pas être utilisés.</span><span class="sxs-lookup"><span data-stu-id="42c2e-206">Routable domains must be used; for example, local or internal domains cannot be used.</span></span>
  - <span data-ttu-id="42c2e-207">Unicode est converti en caractères de trait de soulignement.</span><span class="sxs-lookup"><span data-stu-id="42c2e-207">Unicode is converted to underscore characters.</span></span>
  - <span data-ttu-id="42c2e-208">**userPrincipalName** ne peut pas contenir de valeurs en double dans l’annuaire.</span><span class="sxs-lookup"><span data-stu-id="42c2e-208">**userPrincipalName** cannot contain any duplicate values in the directory.</span></span> 
    
## <a name="prepare-the-userprincipalname-attribute"></a><span data-ttu-id="42c2e-209">Préparation de l’attribut userPrincipalName</span><span class="sxs-lookup"><span data-stu-id="42c2e-209">Prepare the userPrincipalName attribute</span></span>

<span data-ttu-id="42c2e-210">Active Directory est conçu pour permettre aux utilisateurs finaux de votre organisation de se connecter à votre annuaire à l’aide de **sAMAccountName** ou de **userPrincipalName**.</span><span class="sxs-lookup"><span data-stu-id="42c2e-210">Active Directory is designed to allow the end users in your organization to sign in to your directory by using either **sAMAccountName** or **userPrincipalName**.</span></span> <span data-ttu-id="42c2e-211">De même, les utilisateurs finaux peuvent se connecter à Office 365 à l’aide du nom d’utilisateur principal (UPN) de leur compte professionnel ou scolaire.</span><span class="sxs-lookup"><span data-stu-id="42c2e-211">Similarly, end users can sign in to Office 365 by using the user principal name (UPN) of their work or school account.</span></span> <span data-ttu-id="42c2e-212">La synchronisation d’annuaires tente de créer des utilisateurs dans Azure Active Directory à l’aide du même nom d’utilisateur principal qui se trouve dans votre annuaire local.</span><span class="sxs-lookup"><span data-stu-id="42c2e-212">Directory synchronization attempts to create new users in Azure Active Directory by using the same UPN that's in your on-premises directory.</span></span> <span data-ttu-id="42c2e-213">Le nom d’utilisateur principal est mis en forme comme une adresse de messagerie.</span><span class="sxs-lookup"><span data-stu-id="42c2e-213">The UPN is formatted like an email address.</span></span> 

<span data-ttu-id="42c2e-214">Dans Office 365, le nom d’utilisateur principal est l’attribut par défaut utilisé pour générer l’adresse de messagerie.</span><span class="sxs-lookup"><span data-stu-id="42c2e-214">In Office 365, the UPN is the default attribute that's used to generate the email address.</span></span> <span data-ttu-id="42c2e-215">Il est facile d’obtenir la valeur **userPrincipalName** (sur site et dans Azure Active Directory) et l’adresse de messagerie principale dans **proxyAddresses** est définie sur des valeurs différentes.</span><span class="sxs-lookup"><span data-stu-id="42c2e-215">It's easy to get **userPrincipalName** (on-premises and in Azure Active Directory) and the primary email address in **proxyAddresses** set to different values.</span></span> <span data-ttu-id="42c2e-216">Lorsqu’elles sont définies sur des valeurs différentes, les administrateurs et les utilisateurs finaux peuvent être confondus.</span><span class="sxs-lookup"><span data-stu-id="42c2e-216">When they are set to different values, there can be confusion for administrators and end users.</span></span> 
  
<span data-ttu-id="42c2e-217">Il est préférable d’aligner ces attributs afin de réduire la confusion.</span><span class="sxs-lookup"><span data-stu-id="42c2e-217">It's best to align these attributes to reduce confusion.</span></span> <span data-ttu-id="42c2e-218">Pour répondre aux exigences de l’authentification unique avec les services ADFS (Active Directory Federation Services) 2,0, vous devez vous assurer que l’UPN dans Azure Active Directory et votre annuaire Active Directory local correspondent et qu’ils utilisent un espace de noms de domaine valide.</span><span class="sxs-lookup"><span data-stu-id="42c2e-218">To meet the requirements of single sign-on with Active Directory Federation Services (AD FS) 2.0, you need to ensure that the UPNs in Azure Active Directory and your on-premises Active Directory match and are using a valid domain namespace.</span></span>
  
## <a name="add-an-alternative-upn-suffix-to-ad-ds"></a><span data-ttu-id="42c2e-219">Ajouter un autre suffixe UPN à AD DS</span><span class="sxs-lookup"><span data-stu-id="42c2e-219">Add an alternative UPN suffix to AD DS</span></span>

<span data-ttu-id="42c2e-220">Vous devrez peut-être ajouter un autre suffixe UPN pour associer les informations d’identification d’entreprise de l’utilisateur à l’environnement Office 365.</span><span class="sxs-lookup"><span data-stu-id="42c2e-220">You may need to add an alternative UPN suffix to associate the user's corporate credentials with the Office 365 environment.</span></span> <span data-ttu-id="42c2e-221">Un suffixe UPN est la partie d’un UPN située à droite du caractère @.</span><span class="sxs-lookup"><span data-stu-id="42c2e-221">A UPN suffix is the part of a UPN to the right of the @ character.</span></span> <span data-ttu-id="42c2e-222">Les UPN qui sont utilisés pour l’authentification unique peuvent contenir des lettres, des chiffres, des points, des traits d’unions et des traits de soulignement, mais aucun autre type de caractère.</span><span class="sxs-lookup"><span data-stu-id="42c2e-222">UPNs that are used for single sign-on can contain letters, numbers, periods, dashes, and underscores, but no other types of characters.</span></span>
  
<span data-ttu-id="42c2e-223">Pour plus d’informations sur l’ajout d’un autre suffixe UPN à Active Directory, consultez la rubrique [préparer la synchronisation d’annuaires]( https://go.microsoft.com/fwlink/p/?LinkId=525430).</span><span class="sxs-lookup"><span data-stu-id="42c2e-223">For more information on how to add an alternative UPN suffix to Active Directory, see [Prepare for directory synchronization]( https://go.microsoft.com/fwlink/p/?LinkId=525430).</span></span>
  
## <a name="match-the-on-premises-upn-with-the-office-365-upn"></a><span data-ttu-id="42c2e-224">Faire correspondre l’UPN local au nom UPN Office 365</span><span class="sxs-lookup"><span data-stu-id="42c2e-224">Match the on-premises UPN with the Office 365 UPN</span></span>

<span data-ttu-id="42c2e-225">Si vous avez déjà configuré la synchronisation d’annuaires, il se peut que l’UPN de l’utilisateur pour Office 365 ne corresponde pas à l’UPN local de l’utilisateur défini dans votre service d’annuaire local.</span><span class="sxs-lookup"><span data-stu-id="42c2e-225">If you've already set up directory synchronization, the user's UPN for Office 365 may not match the user's on-premises UPN that's defined in your on-premises directory service.</span></span> <span data-ttu-id="42c2e-226">Cela peut se produire lorsqu’un utilisateur obtient une licence avant la vérification du domaine.</span><span class="sxs-lookup"><span data-stu-id="42c2e-226">This can occur when a user was assigned a license before the domain was verified.</span></span> <span data-ttu-id="42c2e-227">Pour résoudre ce problème, utilisez [PowerShell pour corriger le nom UPN en double](https://go.microsoft.com/fwlink/p/?LinkId=396730) afin de mettre à jour l’UPN de l’utilisateur afin de s’assurer que l’upn Office 365 correspond au nom d’utilisateur et au domaine de l’entreprise.</span><span class="sxs-lookup"><span data-stu-id="42c2e-227">To fix this, use [PowerShell to fix duplicate UPN](https://go.microsoft.com/fwlink/p/?LinkId=396730) to update the user's UPN to ensure that the Office 365 UPN matches the corporate user name and domain.</span></span> <span data-ttu-id="42c2e-228">Si vous mettez à jour l’UPN dans le service d’annuaire local et souhaitez le synchroniser avec l’identité Azure Active Directory, vous devez supprimer la licence de l’utilisateur dans Office 365 avant d’effectuer les modifications en local.</span><span class="sxs-lookup"><span data-stu-id="42c2e-228">If you are updating the UPN in the on-premises directory service and would like it to synchronize with the Azure Active Directory identity, you need to remove the user's license in Office 365 prior to making the changes on-premises.</span></span> 
  
<span data-ttu-id="42c2e-229">Voir aussi [Comment préparer un domaine non routable (tel que le domaine. local) pour la synchronisation d’annuaires](prepare-a-non-routable-domain-for-directory-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="42c2e-229">See also [How to prepare a non-routable domain (such as .local domain) for directory synchronization](prepare-a-non-routable-domain-for-directory-synchronization.md).</span></span>
  
## <a name="directory-integration-tools"></a><span data-ttu-id="42c2e-230">Outils d’intégration d’annuaire</span><span class="sxs-lookup"><span data-stu-id="42c2e-230">Directory integration tools</span></span>

<span data-ttu-id="42c2e-231">La synchronisation d’annuaires est la synchronisation des objets d’annuaire (utilisateurs, groupes et contacts) à partir de votre environnement Active Directory local vers l’infrastructure d’annuaire Office 365, Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="42c2e-231">Directory synchronization is the synchronization of directory objects (users, groups, and contacts) from your on-premises Active Directory environment to the Office 365 directory infrastructure, Azure Active Directory.</span></span> <span data-ttu-id="42c2e-232">Consultez la rubrique [Outils d’intégration d’annuaire](https://go.microsoft.com/fwlink/p/?LinkID=510956) pour obtenir la liste des outils disponibles et leur fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="42c2e-232">See [Directory Integration Tools](https://go.microsoft.com/fwlink/p/?LinkID=510956) for a list of the available tools and their functionality.</span></span> <span data-ttu-id="42c2e-233">L’outil recommandé est [Microsoft Azure Active Directory Connect](https://go.microsoft.com/fwlink/p/?LinkID=510956).</span><span class="sxs-lookup"><span data-stu-id="42c2e-233">The recommended tool is [Microsoft Azure Active Directory Connect](https://go.microsoft.com/fwlink/p/?LinkID=510956).</span></span> <span data-ttu-id="42c2e-234">Pour plus d’informations sur Azure Active Directory Connect, reportez-vous à [la rubrique intégration de vos identités locales à Azure Active Directory](https://go.microsoft.com/fwlink/p/?LinkId=527969).</span><span class="sxs-lookup"><span data-stu-id="42c2e-234">For more information about Azure Active Directory Connect, see [Integrating your on-premises identities with Azure Active Directory](https://go.microsoft.com/fwlink/p/?LinkId=527969).</span></span>
  
<span data-ttu-id="42c2e-235">Lorsque les comptes d’utilisateur sont synchronisés avec le répertoire Office 365 pour la première fois, ils sont marqués comme non activés.</span><span class="sxs-lookup"><span data-stu-id="42c2e-235">When user accounts are synchronized with the Office 365 directory for the first time, they are marked as not activated.</span></span> <span data-ttu-id="42c2e-236">Ils ne peuvent pas envoyer ou recevoir des courriers électroniques, et ils ne consomment pas de licences d’abonnement.</span><span class="sxs-lookup"><span data-stu-id="42c2e-236">They cannot send or receive email, and they don't consume subscription licenses.</span></span> <span data-ttu-id="42c2e-237">Lorsque vous êtes prêt à attribuer des abonnements Office 365 à des utilisateurs spécifiques, vous devez les sélectionner et les activer en [attribuant des licences aux utilisateurs dans Office 365 pour les entreprises](https://support.office.com/article/997596b5-4173-4627-b915-36abac6786dc).</span><span class="sxs-lookup"><span data-stu-id="42c2e-237">When you're ready to assign Office 365 subscriptions to specific users, you must select and activate them by [Assign licenses to users in Office 365 for business](https://support.office.com/article/997596b5-4173-4627-b915-36abac6786dc).</span></span>
  
<span data-ttu-id="42c2e-238">Vous pouvez également utiliser [PowerShell](https://go.microsoft.com/fwlink/p/?LinkId=613097) pour attribuer des licences.</span><span class="sxs-lookup"><span data-stu-id="42c2e-238">You can also use [PowerShell](https://go.microsoft.com/fwlink/p/?LinkId=613097) to assign licenses.</span></span> <span data-ttu-id="42c2e-239">Découvrez [comment utiliser PowerShell pour attribuer automatiquement des licences à vos utilisateurs Office 365](https://go.microsoft.com/fwlink/p?LinkID=329805) pour une solution automatisée.</span><span class="sxs-lookup"><span data-stu-id="42c2e-239">See [How to Use PowerShell to Automatically Assign Licenses to Your Office 365 Users](https://go.microsoft.com/fwlink/p?LinkID=329805) for an automated solution.</span></span>