---
title: Préparer la mise en service des utilisateurs via  la synchronisation d’annuaires vers Office 365
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
ms.audience: Admin
ms.topic: article
f1_keywords:
- O365p_AddUsersWithDirSync
- O365M_AddUsersWithDirSync
- O365E_HRCSetupAADConnectAboutLM617031
- O365E_AddUsersWithDirSync
ms.service: o365-administration
localization_priority: Normal
ms.custom: Adm_O365
search.appverid:
- MET150
- MOP150
- MOE150
- MBS150
ms.assetid: 01920974-9e6f-4331-a370-13aea4e82b3e
description: Décrit comment préparer la mise en service des utilisateurs vers Office 365 à l’aide de la synchronisation d’annuaires et les avantages à long terme de l’utilisation de cette méthode.
ms.openlocfilehash: 78636fd3ec7aaaac8fa06ba8a0f2c37d76d1b045
ms.sourcegitcommit: 69d60723e611f3c973a6d6779722aa9da77f647f
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/27/2018
ms.locfileid: "22540590"
---
# <a name="prepare-to-provision-users-through-directory-synchronization-to-office-365"></a><span data-ttu-id="20dea-103">Préparer la mise en service des utilisateurs via  la synchronisation d’annuaires vers Office 365</span><span class="sxs-lookup"><span data-stu-id="20dea-103">Prepare to provision users through directory synchronization to Office 365</span></span>

<span data-ttu-id="20dea-p101">Mise en service des utilisateurs avec la synchronisation d’annuaires requiert plus de planification et de préparation à la gestion des simplement de votre compte professionnel ou de l’école directement dans Office 365. Les tâches de planification et de préparation supplémentaires sont nécessaires pour vous assurer que votre environnement sur site Active Directory synchronise correctement pour Azure Active Directory. L’ajout à votre organisation les avantages :</span><span class="sxs-lookup"><span data-stu-id="20dea-p101">Provisioning users with directory synchronization requires more planning and preparation than simply managing your work or school account directly in Office 365. The additional planning and preparation tasks are required to ensure that your on-premises Active Directory synchronizes properly to Azure Active Directory. The added benefits to your organization include:</span></span>
  
- <span data-ttu-id="20dea-107">Réduction des programmes d'administration au sein de votre organisation</span><span class="sxs-lookup"><span data-stu-id="20dea-107">Reducing the administrative programs in your organization</span></span>
- <span data-ttu-id="20dea-108">En activant le scénario d’authentification unique</span><span class="sxs-lookup"><span data-stu-id="20dea-108">Optionally enabling single sign-on scenario</span></span>
- <span data-ttu-id="20dea-109">Automatisation des modifications de compte dans Office 365</span><span class="sxs-lookup"><span data-stu-id="20dea-109">Automating account changes in Office 365</span></span>
    
<span data-ttu-id="20dea-110">Pour plus d’informations sur les avantages de l’utilisation de la synchronisation d’annuaires, voir [Guide de synchronisation de répertoire]( https://go.microsoft.com/fwlink/p/?LinkId=525398) et les [identités Office 365 et Azure Active Directory](about-office-365-identity.md).</span><span class="sxs-lookup"><span data-stu-id="20dea-110">For more information about the advantages of using directory synchronization, see [Directory synchronization roadmap]( https://go.microsoft.com/fwlink/p/?LinkId=525398) and [Understanding Office 365 Identity and Azure Active Directory](about-office-365-identity.md).</span></span>
  
<span data-ttu-id="20dea-111">Pour déterminer quel scénario est le mieux pour votre organisation, passez en revue la [comparaison des outils de l’intégration directory](https://go.microsoft.com/fwlink/p/?LinkId=525320).</span><span class="sxs-lookup"><span data-stu-id="20dea-111">To determine which scenario is the best for your organization, review the [directory integration tools comparison](https://go.microsoft.com/fwlink/p/?LinkId=525320).</span></span>
  
## <a name="directory-cleanup-tasks"></a><span data-ttu-id="20dea-112">Tâches de nettoyage d’annuaire</span><span class="sxs-lookup"><span data-stu-id="20dea-112">Directory cleanup tasks</span></span>

<span data-ttu-id="20dea-113">Avant de commencer la synchronisation de votre annuaire, vous devez nettoyer votre annuaire.</span><span class="sxs-lookup"><span data-stu-id="20dea-113">Before you begin synchronizing your directory, you need to clean up your directory.</span></span>
  
<span data-ttu-id="20dea-114">Consultez également les [attributs synchronisés avec Azure Active Directory par Azure AD se connecter](https://go.microsoft.com/fwlink/p/?LinkId=746480).</span><span class="sxs-lookup"><span data-stu-id="20dea-114">Review also the [attributes synchronized to Azure Active Directory by Azure AD Connect](https://go.microsoft.com/fwlink/p/?LinkId=746480).</span></span>
  
> [!IMPORTANT]
> <span data-ttu-id="20dea-p102">Si vous n’effectuez le nettoyage d’annuaire avant la synchronisation, il peut y avoir une incidence négative importante sur le processus de déploiement. Il peut prendre plusieurs jours ou semaines, transitent par le cycle de synchronisation d’annuaire, qui identifie les erreurs et resynchronisation.</span><span class="sxs-lookup"><span data-stu-id="20dea-p102">If you don't perform directory cleanup before you synchronize, there can be a significant negative effect on the deployment process. It might take days, or even weeks, to go through the cycle of directory synchronization, identifying errors, and re-synchronization.</span></span> 
  
<span data-ttu-id="20dea-117">Dans votre annuaire local, effectuez les tâches de nettoyage suivantes :</span><span class="sxs-lookup"><span data-stu-id="20dea-117">In your on-premises directory, complete the following clean-up tasks:</span></span>
  
1. <span data-ttu-id="20dea-118">Assurez-vous que chaque utilisateur auquel des offres de service Office 365 seront attribuées dispose d’une adresse électronique valide et unique dans l’attribut **proxyAddresses**.</span><span class="sxs-lookup"><span data-stu-id="20dea-118">Ensure that each user who will be assigned Office 365 service offerings has a valid and unique email address in the **proxyAddresses** attribute.</span></span> 
    
2. <span data-ttu-id="20dea-119">Supprimez les valeurs en double dans l'attribut **proxyAddresses**.</span><span class="sxs-lookup"><span data-stu-id="20dea-119">Remove any duplicate values in the **proxyAddresses** attribute.</span></span> 
    
3.  <span data-ttu-id="20dea-p103">Si possible, assurez-vous que chaque utilisateur qui sera attribué offres de services Office 365 a pour valeur pour l’attribut **userPrincipalName** valide et unique dans l’objet **utilisateur** de l’utilisateur. Pour une meilleure expérience de synchronisation, vérifiez l’UPN sur site Active Directory établit une correspondance avec le nuage UPN. Si un utilisateur ne dispose pas d’une valeur pour l’attribut **userPrincipalName** , l’objet **utilisateur** doit contenir une valeur valide et unique pour l’attribut **sAMAccountName** . Supprimez les valeurs en double dans l’attribut **userPrincipalName** .</span><span class="sxs-lookup"><span data-stu-id="20dea-p103">If possible, ensure that each user who will be assigned Office 365 service offerings has a valid and unique value for the **userPrincipalName** attribute in the user's **user** object. For best synchronization experience, ensure that the on-premises Active Directory UPN matches the cloud UPN. If a user does not have a value for the **userPrincipalName** attribute, then the **user** object must contain a valid and unique value for the **sAMAccountName** attribute. Remove any duplicate values in the **userPrincipalName** attribute.</span></span> 
    
4. <span data-ttu-id="20dea-124">Pour une utilisation optimale de la liste d'adresses globale (LAG), assurez-vous que les informations des attributs suivants sont correctes :</span><span class="sxs-lookup"><span data-stu-id="20dea-124">For optimal use of the global address list (GAL), be sure the information in the following attributes is correct:</span></span>
    
  - <span data-ttu-id="20dea-125">givenName </span><span class="sxs-lookup"><span data-stu-id="20dea-125">givenName</span></span>
  - <span data-ttu-id="20dea-126">nom</span><span class="sxs-lookup"><span data-stu-id="20dea-126">surname</span></span>
  - <span data-ttu-id="20dea-127">displayName</span><span class="sxs-lookup"><span data-stu-id="20dea-127">displayName</span></span>
  - <span data-ttu-id="20dea-128">Fonction</span><span class="sxs-lookup"><span data-stu-id="20dea-128">Job Title</span></span>
  - <span data-ttu-id="20dea-129">Service</span><span class="sxs-lookup"><span data-stu-id="20dea-129">Department</span></span>
  - <span data-ttu-id="20dea-130">Bureau</span><span class="sxs-lookup"><span data-stu-id="20dea-130">Office</span></span>
  - <span data-ttu-id="20dea-131">Téléphone (bureau)</span><span class="sxs-lookup"><span data-stu-id="20dea-131">Office Phone</span></span>
  - <span data-ttu-id="20dea-132">Téléphone mobile</span><span class="sxs-lookup"><span data-stu-id="20dea-132">Mobile Phone</span></span>
  - <span data-ttu-id="20dea-133">Numéro de télécopie</span><span class="sxs-lookup"><span data-stu-id="20dea-133">Fax Number</span></span>
  - <span data-ttu-id="20dea-134">Rue</span><span class="sxs-lookup"><span data-stu-id="20dea-134">Street Address</span></span>
  - <span data-ttu-id="20dea-135">Ville</span><span class="sxs-lookup"><span data-stu-id="20dea-135">City</span></span>
  - <span data-ttu-id="20dea-136">Département ou province</span><span class="sxs-lookup"><span data-stu-id="20dea-136">State or Province</span></span>
  - <span data-ttu-id="20dea-137">Code postal</span><span class="sxs-lookup"><span data-stu-id="20dea-137">Zip or Postal Code</span></span>
  - <span data-ttu-id="20dea-138">Pays ou région</span><span class="sxs-lookup"><span data-stu-id="20dea-138">Country or Region</span></span>
    
## <a name="directory-object-and-attribute-preparation"></a><span data-ttu-id="20dea-139">Préparation d'objet et attribut d'annuaire</span><span class="sxs-lookup"><span data-stu-id="20dea-139">Directory object and attribute preparation</span></span>

<span data-ttu-id="20dea-p104">Synchronisation d’annuaires réussie entre votre annuaire local et d’Office 365 nécessite que votre attributs d’annuaire local sont correctement préparés. Par exemple, vous devez vous assurer que les caractères spécifiques ne sont pas utilisés dans certains attributs sont synchronisés avec l’environnement Office 365. Caractères inattendus ne provoquent pas la synchronisation d’annuaires échoue mais peuvent retourner un message d’avertissement. Caractères non valides entraîne la synchronisation d’annuaires échoue.</span><span class="sxs-lookup"><span data-stu-id="20dea-p104">Successful directory synchronization between your on-premises directory and Office 365 requires that your on-premises directory attributes are properly prepared. For example, you need to ensure that specific characters aren't used in certain attributes that are synchronized with the Office 365 environment. Unexpected characters do not cause directory synchronization to fail but might return a warning. Invalid characters will cause directory synchronization to fail.</span></span>
  
<span data-ttu-id="20dea-p105">La synchronisation d’annuaires échouera également si certains de vos utilisateurs Active Directory ont un ou plusieurs attributs en double. Chaque utilisateur doit disposer des attributs uniques.</span><span class="sxs-lookup"><span data-stu-id="20dea-p105">Directory synchronization will also fail if some of your Active Directory users have one or more duplicate attributes. Each user must have unique attributes.</span></span>
  
<span data-ttu-id="20dea-146">Vous devez préparer les attributs sont répertoriés ici :</span><span class="sxs-lookup"><span data-stu-id="20dea-146">The attributes that you need to prepare are listed here:</span></span>
  
 <span data-ttu-id="20dea-147">**Remarque :** Vous pouvez également utiliser l' [outil IdFix](install-and-run-idfix.md) pour rendre ce processus beaucoup plus facile.</span><span class="sxs-lookup"><span data-stu-id="20dea-147">**NOTE:** You can also use the [IdFix tool](install-and-run-idfix.md) to make this process a lot easier.</span></span> 
  
- <span data-ttu-id="20dea-148">**displayName**</span><span class="sxs-lookup"><span data-stu-id="20dea-148">**displayName**</span></span>
    
  - <span data-ttu-id="20dea-149">Si l'attribut existe dans l'objet utilisateur, il sera synchronisé avec Office 365.</span><span class="sxs-lookup"><span data-stu-id="20dea-149">If the attribute exists in the user object, it will be synchronized with Office 365.</span></span>
  - <span data-ttu-id="20dea-p106">Si cet attribut existe dans l'objet utilisateur, une valeur doit lui être attribuée. En d'autres termes, il ne doit pas être vide.</span><span class="sxs-lookup"><span data-stu-id="20dea-p106">If this attribute exists in the user object, there must be a value for it. That is, the attribute must not be blank.</span></span>
  - <span data-ttu-id="20dea-152">Nombre maximal de caractères : 256</span><span class="sxs-lookup"><span data-stu-id="20dea-152">Maximum number of characters: 256</span></span>
    
- <span data-ttu-id="20dea-153">**givenName **</span><span class="sxs-lookup"><span data-stu-id="20dea-153">**givenName**</span></span>
    
  - <span data-ttu-id="20dea-154">Si l'attribut est présent dans l'objet utilisateur, il sera synchronisé avec Office 365, mais Office 365 n'exige pas son utilisation.</span><span class="sxs-lookup"><span data-stu-id="20dea-154">If the attribute exists in the user object, it will be synchronized with Office 365, but Office 365 does not require or use it.</span></span>
  - <span data-ttu-id="20dea-155">Nombre maximal de caractères : 64</span><span class="sxs-lookup"><span data-stu-id="20dea-155">Maximum number of characters: 64</span></span>
    
- <span data-ttu-id="20dea-156">**messagerie**</span><span class="sxs-lookup"><span data-stu-id="20dea-156">**mail**</span></span>
    
  - <span data-ttu-id="20dea-157">La valeur de l’attribut doit être unique dans l’annuaire.</span><span class="sxs-lookup"><span data-stu-id="20dea-157">The attribute value must be unique within the directory.</span></span>
    
    > [!NOTE]
    > <span data-ttu-id="20dea-p107">S’il existe des valeurs en double, le premier utilisateur avec la valeur est synchronisé. Les utilisateurs suivants n’apparaissent pas dans Office 365. Vous devez modifier la valeur dans Office 365, ou modifier les deux valeurs dans le répertoire local afin que les deux utilisateurs dans Office 365.</span><span class="sxs-lookup"><span data-stu-id="20dea-p107">If there are duplicate values, the first user with the value is synchronized. Subsequent users will not appear in Office 365. You must modify either the value in Office 365, or modify both of the values in the on-premises directory in order for both users to appear in Office 365.</span></span> 
  
- <span data-ttu-id="20dea-161">**mailNickname** (alias Exchange)</span><span class="sxs-lookup"><span data-stu-id="20dea-161">**mailNickname** (Exchange alias)</span></span> 
    
  - <span data-ttu-id="20dea-162">La valeur d’attribut ne peut pas commencer par un point (.).</span><span class="sxs-lookup"><span data-stu-id="20dea-162">The attribute value cannot begin with a period (.).</span></span>
  - <span data-ttu-id="20dea-163">La valeur de l’attribut doit être unique dans l’annuaire.</span><span class="sxs-lookup"><span data-stu-id="20dea-163">The attribute value must be unique within the directory.</span></span>
    
- <span data-ttu-id="20dea-164">**proxyAddresses **</span><span class="sxs-lookup"><span data-stu-id="20dea-164">**proxyAddresses**</span></span>
    
  - <span data-ttu-id="20dea-165">Attribut à valeur multiple</span><span class="sxs-lookup"><span data-stu-id="20dea-165">Multiple-value attribute</span></span>
  - <span data-ttu-id="20dea-166">Nombre maximal de caractères par valeur : 256</span><span class="sxs-lookup"><span data-stu-id="20dea-166">Maximum number of characters per value: 256</span></span>
  - <span data-ttu-id="20dea-167">La valeur d’attribut ne doit pas contenir un espace.</span><span class="sxs-lookup"><span data-stu-id="20dea-167">The attribute value must not contain a space.</span></span>
  - <span data-ttu-id="20dea-168">La valeur de l’attribut doit être unique dans l’annuaire.</span><span class="sxs-lookup"><span data-stu-id="20dea-168">The attribute value must be unique within the directory.</span></span>
  - <span data-ttu-id="20dea-169">Caractères non valides : \< \> () ; , [ ] "</span><span class="sxs-lookup"><span data-stu-id="20dea-169">Invalid characters: \< \> ( ) ; , [ ] "</span></span>
    
    <span data-ttu-id="20dea-170">Notez que les caractères non valides s’appliquent pour les caractères qui suivent le séparateur de type et « : », telle que SMTP:User@contso.com est autorisée, mais n’est pas SMTP:user:M@contoso.com.</span><span class="sxs-lookup"><span data-stu-id="20dea-170">Note that the invalid characters apply to the characters following the type delimiter and ":", such that SMTP:User@contso.com is allowed, but SMTP:user:M@contoso.com is not.</span></span>
    
    > [!IMPORTANT]
    > <span data-ttu-id="20dea-p108">Toutes les adresses SMTP Simple Mail Transport Protocol () doivent se conformer aux standards de messagerie électronique. S’il existent d’adresses en doublons ou indésirables, consultez la rubrique [suppression proxy dupliqué et indésirable adresses dans Exchange](https://go.microsoft.com/fwlink/?LinkId=293860).</span><span class="sxs-lookup"><span data-stu-id="20dea-p108">All Simple Mail Transport Protocol (SMTP) addresses should comply with email messaging standards. If duplicate or unwanted addresses exist, see the Help topic [Removing duplicate and unwanted proxy addresses in Exchange](https://go.microsoft.com/fwlink/?LinkId=293860).</span></span> 
  
- <span data-ttu-id="20dea-173">**sAMAccountName**</span><span class="sxs-lookup"><span data-stu-id="20dea-173">**sAMAccountName**</span></span>
    
  - <span data-ttu-id="20dea-174">Nombre maximal de caractères : 20</span><span class="sxs-lookup"><span data-stu-id="20dea-174">Maximum number of characters: 20</span></span>
  - <span data-ttu-id="20dea-175">La valeur de l’attribut doit être unique dans l’annuaire.</span><span class="sxs-lookup"><span data-stu-id="20dea-175">The attribute value must be unique within the directory.</span></span>
  - <span data-ttu-id="20dea-p109">Caractères non valides : [\ "|, / : \< \> + = ; ? \* ]</span><span class="sxs-lookup"><span data-stu-id="20dea-p109">Invalid characters: [ \ " | , / : \< \> + = ; ? \* ]</span></span>
  - <span data-ttu-id="20dea-178">Si un utilisateur présente un attribut **sAMAccountName** non valide, mais dispose d'un attribut **userPrincipalName** valide, le compte d'utilisateur est créé dans Office 365.</span><span class="sxs-lookup"><span data-stu-id="20dea-178">If a user has an invalid **sAMAccountName** attribute but has a valid **userPrincipalName** attribute, the user account is created in Office 365.</span></span> 
  - <span data-ttu-id="20dea-179">Si les **attributs sAMAccountName** et **userPrincipalName** ne sont pas valides, l’attribut **userPrincipalName** de Active Directory local doit être mis à jour.</span><span class="sxs-lookup"><span data-stu-id="20dea-179">If both **sAMAccountName** and **userPrincipalName** are invalid, the on-premises Active Directory **userPrincipalName** attribute must be updated.</span></span> 
    
- <span data-ttu-id="20dea-180">**sn** (surname, patronyme)</span><span class="sxs-lookup"><span data-stu-id="20dea-180">**sn** (surname)</span></span> 
    
  - <span data-ttu-id="20dea-181">Si l'attribut est présent dans l'objet utilisateur, il sera synchronisé avec Office 365, mais Office 365 n'exige pas son utilisation.</span><span class="sxs-lookup"><span data-stu-id="20dea-181">If the attribute exists in the user object, it will be synchronized with Office 365, but Office 365 does not require or use it.</span></span>
    
- <span data-ttu-id="20dea-182">**targetAddress**</span><span class="sxs-lookup"><span data-stu-id="20dea-182">**targetAddress**</span></span>
    
    <span data-ttu-id="20dea-p110">Il est nécessaire que l’attribut **targetAddress** (par exemple, SMTP:tom@contoso.com) qui est remplie pour l’utilisateur doit apparaître dans la liste d’adresses globale de Office 365. Dans les scénarios de la migration de messagerie tiers, cela nécessite l’extension du schéma Office 365 pour le répertoire local. L’extension de schéma Office 365 serait également ajouter d’autres attributs utiles pour gérer les objets Office 365 qui sont remplis à l’aide d’un outil de synchronisation d’annuaire à partir de l’annuaire local. Par exemple, l’attribut **msExchHideFromAddressLists** pour gérer les boîtes aux lettres masquées ou les groupes de distribution doit être ajouté.</span><span class="sxs-lookup"><span data-stu-id="20dea-p110">It's required that the **targetAddress** attribute (for example, SMTP:tom@contoso.com) that's populated for the user must appear in the Office 365 GAL. In third-party messaging migration scenarios, this would require the Office 365 schema extension for the on-premises directory. The Office 365 schema extension would also add other useful attributes to manage Office 365 objects that are populated by using a directory synchronization tool from on-premises directory. For example, the **msExchHideFromAddressLists** attribute to manage hidden mailboxes or distribution groups would be added.</span></span> 
   
  - <span data-ttu-id="20dea-187">Nombre maximal de caractères : 256</span><span class="sxs-lookup"><span data-stu-id="20dea-187">Maximum number of characters: 256</span></span>
  - <span data-ttu-id="20dea-188">La valeur d’attribut ne doit pas contenir un espace.</span><span class="sxs-lookup"><span data-stu-id="20dea-188">The attribute value must not contain a space.</span></span>
  - <span data-ttu-id="20dea-189">La valeur de l’attribut doit être unique dans l’annuaire.</span><span class="sxs-lookup"><span data-stu-id="20dea-189">The attribute value must be unique within the directory.</span></span>
  - <span data-ttu-id="20dea-190">Caractères non valides : \ \< \> () ; , [ ] "</span><span class="sxs-lookup"><span data-stu-id="20dea-190">Invalid characters: \ \< \> ( ) ; , [ ] "</span></span>
  - <span data-ttu-id="20dea-191">Toutes les adresses SMTP (Simple Mail Transport Protocol) doivent respecter les normes de messagerie électronique.</span><span class="sxs-lookup"><span data-stu-id="20dea-191">All Simple Mail Transport Protocol (SMTP) addresses should comply with email messaging standards.</span></span>
    
- <span data-ttu-id="20dea-192">**userPrincipalName**</span><span class="sxs-lookup"><span data-stu-id="20dea-192">**userPrincipalName**</span></span>
    
  - <span data-ttu-id="20dea-p111">L’attribut **userPrincipalName** doit être au format de connexion style Internet où le nom d’utilisateur est suivi par l’arobase (@) et un nom de domaine : par exemple, user@contoso.com. Toutes les adresses SMTP Simple Mail Transport Protocol () doivent se conformer aux standards de messagerie électronique.</span><span class="sxs-lookup"><span data-stu-id="20dea-p111">The **userPrincipalName** attribute must be in the Internet-style sign-in format where the user name is followed by the at sign (@) and a domain name: for example, user@contoso.com. All Simple Mail Transport Protocol (SMTP) addresses should comply with email messaging standards.</span></span>
  - <span data-ttu-id="20dea-p112">Le nombre maximal de caractères pour l’attribut **userPrincipalName** est de 113. Un nombre spécifique de caractères est autorisé avant et après le signe (@), comme suit :</span><span class="sxs-lookup"><span data-stu-id="20dea-p112">The maximum number of characters for the **userPrincipalName** attribute is 113. A specific number of characters are permitted before and after the at sign (@), as follows:</span></span> 
  - <span data-ttu-id="20dea-197">Nombre maximal de caractères du nom d'utilisateur précédant l'arobase (@) : 64</span><span class="sxs-lookup"><span data-stu-id="20dea-197">Maximum number of characters for the user name that is in front of the at sign (@): 64</span></span>
  - <span data-ttu-id="20dea-198">Nombre maximal de caractères du nom de domaine suivant l'arobase (@) : 48</span><span class="sxs-lookup"><span data-stu-id="20dea-198">Maximum number of characters for the domain name following the at sign (@): 48</span></span>
  - <span data-ttu-id="20dea-p113">Caractères non valides : \ % &amp; \* + / = ? { } | \< \> ( ) ; : , [ ] "</span><span class="sxs-lookup"><span data-stu-id="20dea-p113">Invalid characters: \ % &amp; \* + / = ? { } | \< \> ( ) ; : , [ ] "</span></span>
  - <span data-ttu-id="20dea-201">Un tréma est également un caractère non valide.</span><span class="sxs-lookup"><span data-stu-id="20dea-201">An umlaut is also an invalid character.</span></span>
  - <span data-ttu-id="20dea-202">Le caractère @ est requis dans chaque valeur **userPrincipalName** .</span><span class="sxs-lookup"><span data-stu-id="20dea-202">The @ character is required in each **userPrincipalName** value.</span></span> 
  - <span data-ttu-id="20dea-203">Le caractère @ ne peut pas être le premier caractère dans chaque valeur **userPrincipalName**.</span><span class="sxs-lookup"><span data-stu-id="20dea-203">The @ character cannot be the first character in each **userPrincipalName** value.</span></span> 
  - <span data-ttu-id="20dea-204">Le nom d’utilisateur ne peut pas se terminer par un point (.), une esperluette (&amp;), un espace ou une arobase (@).</span><span class="sxs-lookup"><span data-stu-id="20dea-204">The user name cannot end with a period (.), an ampersand (&amp;), a space, or an at sign (@).</span></span>
  - <span data-ttu-id="20dea-205">Le nom d’utilisateur ne peut pas contenir d’espaces.</span><span class="sxs-lookup"><span data-stu-id="20dea-205">The user name cannot contain any spaces.</span></span>
  - <span data-ttu-id="20dea-206">Domaines routables doivent être utilisés ; par exemple, les domaines locales ou internes ne peut être utilisés.</span><span class="sxs-lookup"><span data-stu-id="20dea-206">Routable domains must be used; for example, local or internal domains cannot be used.</span></span>
  - <span data-ttu-id="20dea-207">Unicode est converti en caractères de trait de soulignement.</span><span class="sxs-lookup"><span data-stu-id="20dea-207">Unicode is converted to underscore characters.</span></span>
  - <span data-ttu-id="20dea-208">L’attribut **userPrincipalName** ne peut pas contenir de valeurs en double dans l’annuaire.</span><span class="sxs-lookup"><span data-stu-id="20dea-208">**userPrincipalName** cannot contain any duplicate values in the directory.</span></span> 
    
## <a name="prepare-the-userprincipalname-attribute"></a><span data-ttu-id="20dea-209">Préparation de l'attribut userPrincipalName</span><span class="sxs-lookup"><span data-stu-id="20dea-209">Prepare the userPrincipalName attribute</span></span>

<span data-ttu-id="20dea-p114">Active Directory est conçu pour permettre aux utilisateurs finaux de votre organisation pour vous connecter à votre répertoire en utilisant **userPrincipalName**ou **sAMAccountName** . De même, les utilisateurs finaux peuvent se connecter à Office 365 à l’aide du nom d’utilisateur principal (UPN) de leur travail ou école compte. La synchronisation d’annuaires tente de créer de nouveaux utilisateurs dans Azure Active Directory à l’aide de la même UPN qui se trouve dans votre répertoire local. L’UPN est mis en forme comme une adresse de messagerie.</span><span class="sxs-lookup"><span data-stu-id="20dea-p114">Active Directory is designed to allow the end users in your organization to sign in to your directory by using either **sAMAccountName** or **userPrincipalName**. Similarly, end users can sign in to Office 365 by using the user principal name (UPN) of their work or school account. Directory synchronization attempts to create new users in Azure Active Directory by using the same UPN that's in your on-premises directory. The UPN is formatted like an email address.</span></span> 

<span data-ttu-id="20dea-p115">Dans Office 365, l’UPN est l’attribut par défaut qui est utilisé pour générer l’adresse de messagerie. Il est facile d’obtenir **l’attribut userPrincipalName** (sur site et dans Azure Active Directory) et l’adresse de messagerie principale dans **proxyAddresses** valeurs différentes. Lorsqu’ils sont définis à des valeurs différentes, il peut être source de confusion pour les administrateurs et les utilisateurs finaux.</span><span class="sxs-lookup"><span data-stu-id="20dea-p115">In Office 365, the UPN is the default attribute that's used to generate the email address. It's easy to get **userPrincipalName** (on-premises and in Azure Active Directory) and the primary email address in **proxyAddresses** set to different values. When they are set to different values, there can be confusion for administrators and end users.</span></span> 
  
<span data-ttu-id="20dea-p116">Il est préférable d’aligner ces attributs pour réduire les risques de confusion. Pour satisfaire les exigences d’authentification unique avec Active Directory Federation Services (AD FS) 2.0, vous devez vous assurer que l’UPN dans Azure Active Directory et Active Directory local correspondent et qu’ils utilisent un espace de noms de domaine valide.</span><span class="sxs-lookup"><span data-stu-id="20dea-p116">It's best to align these attributes to reduce confusion. To meet the requirements of single sign-on with Active Directory Federation Services (AD FS) 2.0, you need to ensure that the UPNs in Azure Active Directory and your on-premises Active Directory match and are using a valid domain namespace.</span></span>
  
## <a name="add-an-alternative-upn-suffix-to-ad-ds"></a><span data-ttu-id="20dea-219">Ajouter un autre suffixe UPN à AD DS</span><span class="sxs-lookup"><span data-stu-id="20dea-219">Add an alternative UPN suffix to AD DS</span></span>

<span data-ttu-id="20dea-p117">Vous devrez peut-être ajouter un autre suffixe UPN pour associer des informations d’identification d’entreprise de l’utilisateur à l’environnement Office 365. Un suffixe UPN est la partie d’un nom UPN à droite le caractère @. UPN qui est utilisés pour l’authentification unique peut contenir des lettres, chiffres, périodes, tirets et des traits de soulignement, mais aucun autre type de caractères.</span><span class="sxs-lookup"><span data-stu-id="20dea-p117">You may need to add an alternative UPN suffix to associate the user's corporate credentials with the Office 365 environment. A UPN suffix is the part of a UPN to the right of the @ character. UPNs that are used for single sign-on can contain letters, numbers, periods, dashes, and underscores, but no other types of characters.</span></span>
  
<span data-ttu-id="20dea-223">Pour plus d’informations sur la façon d’ajouter un autre suffixe UPN à Active Directory, voir [préparer la synchronisation d’annuaires]( https://go.microsoft.com/fwlink/p/?LinkId=525430).</span><span class="sxs-lookup"><span data-stu-id="20dea-223">For more information on how to add an alternative UPN suffix to Active Directory, see [Prepare for directory synchronization]( https://go.microsoft.com/fwlink/p/?LinkId=525430).</span></span>
  
## <a name="match-the-on-premises-upn-with-the-office-365-upn"></a><span data-ttu-id="20dea-224">Correspond à l’UPN local avec la Office 365 UPN</span><span class="sxs-lookup"><span data-stu-id="20dea-224">Match the on-premises UPN with the Office 365 UPN</span></span>

<span data-ttu-id="20dea-p118">Si vous avez déjà configuré la synchronisation d’annuaires, UPN de l’utilisateur pour Office 365 peut correspondre pas UPN local de l’utilisateur qui est défini dans votre service d’annuaire local. Cela peut se produire lorsqu’un utilisateur a été attribué une licence avant le domaine a été vérifié. Pour résoudre ce problème, utiliser [PowerShell pour résoudre les UPN en double](https://go.microsoft.com/fwlink/p/?LinkId=396730) pour mettre à jour le nom UPN de l’utilisateur pour vous assurer qu’Office 365 UPN établit une correspondance avec le nom d’utilisateur d’entreprise et le domaine. Si vous mettez à jour l’UPN dans le service d’annuaire local et que vous souhaitez synchroniser avec l’identité d’Azure Active Directory, vous devez supprimer la licence de l’utilisateur dans Office 365 avant de rendre les modifications locales.</span><span class="sxs-lookup"><span data-stu-id="20dea-p118">If you've already set up directory synchronization, the user's UPN for Office 365 may not match the user's on-premises UPN that's defined in your on-premises directory service. This can occur when a user was assigned a license before the domain was verified. To fix this, use [PowerShell to fix duplicate UPN](https://go.microsoft.com/fwlink/p/?LinkId=396730) to update the user's UPN to ensure that the Office 365 UPN matches the corporate user name and domain. If you are updating the UPN in the on-premises directory service and would like it to synchronize with the Azure Active Directory identity, you need to remove the user's license in Office 365 prior to making the changes on-premises.</span></span> 
  
<span data-ttu-id="20dea-229">Voir aussi [comment préparer un domaine non routable (par exemple, domaine .local) pour la synchronisation d’annuaires](prepare-a-non-routable-domain-for-directory-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="20dea-229">See also [How to prepare a non-routable domain (such as .local domain) for directory synchronization](prepare-a-non-routable-domain-for-directory-synchronization.md).</span></span>
  
## <a name="directory-integration-tools"></a><span data-ttu-id="20dea-230">Outils de l’intégration d’annuaire</span><span class="sxs-lookup"><span data-stu-id="20dea-230">Directory integration tools</span></span>

<span data-ttu-id="20dea-p119">La synchronisation d’annuaires est la synchronisation des objets d’annuaire (utilisateurs, groupes et contacts) à partir de votre environnement d’Active Directory sur site à l’infrastructure d’annuaire Office 365, Azure Active Directory. Pour obtenir la liste des outils disponibles et leurs fonctionnalités, voir [Outils de l’intégration d’annuaire](https://go.microsoft.com/fwlink/p/?LinkID=510956) . L’outil recommandé est [Microsoft Azure Active Directory se connecter](https://go.microsoft.com/fwlink/p/?LinkID=510956). Pour plus d’informations sur Azure Active Directory se connecter, voir [intégration des identités avec Azure Active Directory local](https://go.microsoft.com/fwlink/p/?LinkId=527969).</span><span class="sxs-lookup"><span data-stu-id="20dea-p119">Directory synchronization is the synchronization of directory objects (users, groups, and contacts) from your on-premises Active Directory environment to the Office 365 directory infrastructure, Azure Active Directory. See [Directory Integration Tools](https://go.microsoft.com/fwlink/p/?LinkID=510956) for a list of the available tools and their functionality. The recommended tool is [Microsoft Azure Active Directory Connect](https://go.microsoft.com/fwlink/p/?LinkID=510956). For more information about Azure Active Directory Connect, see [Integrating your on-premises identities with Azure Active Directory](https://go.microsoft.com/fwlink/p/?LinkId=527969).</span></span>
  
<span data-ttu-id="20dea-p120">Lorsque des comptes d’utilisateur sont synchronisés avec l’annuaire Office 365 pour la première fois, ils sont marqués comme non activée. Ils ne peuvent pas envoyer ou recevoir du courrier électronique, et ils n’utilisent pas de licences d’abonnement. Lorsque vous êtes prêt à affecter des abonnements Office 365 à des utilisateurs spécifiques, vous devez sélectionner et les activer à [attribuer des licences aux utilisateurs dans Office 365 pour entreprises](https://support.office.com/article/997596b5-4173-4627-b915-36abac6786dc).</span><span class="sxs-lookup"><span data-stu-id="20dea-p120">When user accounts are synchronized with the Office 365 directory for the first time, they are marked as not activated. They cannot send or receive email, and they don't consume subscription licenses. When you're ready to assign Office 365 subscriptions to specific users, you must select and activate them by [Assign licenses to users in Office 365 for business](https://support.office.com/article/997596b5-4173-4627-b915-36abac6786dc).</span></span>
  
<span data-ttu-id="20dea-p121">Vous pouvez également utiliser [PowerShell](https://go.microsoft.com/fwlink/p/?LinkId=613097) pour attribuer des licences. Une solution automatisée, voir [comment utiliser PowerShell pour attribuer automatiquement des licences à vos utilisateurs d’Office 365](https://go.microsoft.com/fwlink/p?LinkID=329805) .</span><span class="sxs-lookup"><span data-stu-id="20dea-p121">You can also use [PowerShell](https://go.microsoft.com/fwlink/p/?LinkId=613097) to assign licenses. See [How to Use PowerShell to Automatically Assign Licenses to Your Office 365 Users](https://go.microsoft.com/fwlink/p?LinkID=329805) for an automated solution.</span></span>